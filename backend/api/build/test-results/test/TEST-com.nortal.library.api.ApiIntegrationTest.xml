<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="com.nortal.library.api.ApiIntegrationTest" tests="10" skipped="0" failures="0" errors="0" timestamp="2025-12-19T20:44:33.216Z" hostname="pupil.kood.tech" time="5.307">
  <properties/>
  <testcase name="borrowAndReturnHappyPath()" classname="com.nortal.library.api.ApiIntegrationTest" time="0.924"/>
  <testcase name="memberCrudRoundtrip()" classname="com.nortal.library.api.ApiIntegrationTest" time="0.075"/>
  <testcase name="listsSeedBooksAndMembers()" classname="com.nortal.library.api.ApiIntegrationTest" time="0.051"/>
  <testcase name="bookCrudRoundtrip()" classname="com.nortal.library.api.ApiIntegrationTest" time="0.107"/>
  <testcase name="extendLoanUpdatesDueDate()" classname="com.nortal.library.api.ApiIntegrationTest" time="0.071"/>
  <testcase name="reserveAndCancelReservation()" classname="com.nortal.library.api.ApiIntegrationTest" time="0.067"/>
  <testcase name="searchReturnsFilteredResults()" classname="com.nortal.library.api.ApiIntegrationTest" time="0.076"/>
  <testcase name="memberSummaryShowsLoansAndReservations()" classname="com.nortal.library.api.ApiIntegrationTest" time="0.096"/>
  <testcase name="overdueEndpointListsPastDue()" classname="com.nortal.library.api.ApiIntegrationTest" time="0.075"/>
  <testcase name="healthEndpointRespondsOk()" classname="com.nortal.library.api.ApiIntegrationTest" time="0.033"/>
  <system-out><![CDATA[22:44:29.170 [Test worker] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.nortal.library.api.ApiIntegrationTest]: ApiIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
22:44:29.295 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.nortal.library.api.LibraryApplication for test class com.nortal.library.api.ApiIntegrationTest



888b    888                  888             888      888      8888888888        d8888 8888888b.        .d8888b.   .d8888b.   .d8888b.   .d8888b.   
8888b   888                  888             888      888      888              d88888 888   Y88b      d88P  Y88b d88P  Y88b d88P  Y88b d88P  Y88b  
88888b  888                  888             888      888      888             d88P888 888    888             888 888    888        888 888         
888Y88b 888  .d88b.  888d888 888888  8888b.  888      888      8888888        d88P 888 888   d88P           .d88P 888    888      .d88P 888d888b.   
888 Y88b888 d88""88b 888P"   888        "88b 888      888      888           d88P  888 8888888P"        .od888P"  888    888  .od888P"  888P "Y88b  
888  Y88888 888  888 888     888    .d888888 888      888      888          d88P   888 888             d88P"      888    888 d88P"      888    888  
888   Y8888 Y88..88P 888     Y88b.  888  888 888      888      888         d8888888888 888             888"       Y88b  d88P 888"       Y88b  d88P  
888    Y888  "Y88P"  888      "Y888 "Y888888 888      88888888 8888888888 d88P     888 888             888888888   "Y8888P"  888888888   "Y8888P"   
                                                                                                                                                    
                                                                                                                                                    
                                                                                                                                                    
 .d8888b.                888 d8b                               d8888                   d8b                                                   888    
d88P  Y88b               888 Y8P                              d88888                   Y8P                                                   888    
888    888               888                                 d88P888                                                                         888    
888         .d88b.   .d88888 888 88888b.   .d88b.           d88P 888 .d8888b  .d8888b  888  .d88b.  88888b.  88888b.d88b.   .d88b.  88888b.  888888 
888        d88""88b d88" 888 888 888 "88b d88P"88b         d88P  888 88K      88K      888 d88P"88b 888 "88b 888 "888 "88b d8P  Y8b 888 "88b 888    
888    888 888  888 888  888 888 888  888 888  888        d88P   888 "Y8888b. "Y8888b. 888 888  888 888  888 888  888  888 88888888 888  888 888    
Y88b  d88P Y88..88P Y88b 888 888 888  888 Y88b 888       d8888888888      X88      X88 888 Y88b 888 888  888 888  888  888 Y8b.     888  888 Y88b.  
 "Y8888P"   "Y88P"   "Y88888 888 888  888  "Y88888      d88P     888  88888P'  88888P' 888  "Y88888 888  888 888  888  888  "Y8888  888  888  "Y888 
                                               888                                              888                                                 
                                          Y8b d88P                                         Y8b d88P                                                 
                                           "Y88P"                                           "Y88P"                                                                                                 

H2 console: http://localhost:0/h2-console
API:        http://localhost:0/api

2025-12-19T22:44:29.836+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Starting ApiIntegrationTest using Java 21.0.9 with PID 1050170 (started by kooduser in /home/kooduser/Documents/Nortal Test Task/nortal-leap-2026-test-assignment/backend/api)
2025-12-19T22:44:29.839+02:00 DEBUG 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-12-19T22:44:29.839+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : No active profile set, falling back to 1 default profile: "default"
2025-12-19T22:44:30.187+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-19T22:44:30.211+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 20 ms. Found 2 JPA repository interfaces.
2025-12-19T22:44:30.842+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2025-12-19T22:44:30.858+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-19T22:44:30.859+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-12-19T22:44:30.908+02:00  INFO 1050170 --- [library-api] [    Test worker] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-19T22:44:30.909+02:00  INFO 1050170 --- [library-api] [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1048 ms
2025-12-19T22:44:31.068+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-19T22:44:31.177+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:library user=SA
2025-12-19T22:44:31.178+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-19T22:44:31.187+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:library'
2025-12-19T22:44:31.273+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177071273 | took 6ms | statement | connection 1| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL )
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL );
2025-12-19T22:44:31.275+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177071275 | took 1ms | statement | connection 1| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE )
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE );
2025-12-19T22:44:31.288+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177071288 | took 12ms | statement | connection 1| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) )
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) );
2025-12-19T22:44:31.341+02:00  INFO 1050170 --- [library-api] [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-19T22:44:31.373+02:00  INFO 1050170 --- [library-api] [    Test worker] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-19T22:44:31.393+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-19T22:44:31.571+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-19T22:44:32.245+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-19T22:44:32.266+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177072266 | took 4ms | statement | connection 3| url jdbc:h2:mem:library
select * from INFORMATION_SCHEMA.SEQUENCES
select * from INFORMATION_SCHEMA.SEQUENCES;
2025-12-19T22:44:32.277+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177072277 | took 0ms | statement | connection 3| url jdbc:h2:mem:library
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0;
2025-12-19T22:44:32.279+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:33.071+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 35317 (http) with context path '/'
2025-12-19T22:44:33.081+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Started ApiIntegrationTest in 3.513 seconds (process running for 4.591)
2025-12-19T22:44:33.130+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073130 | took 0ms | statement | connection 4| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:33.163+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073163 | took 1ms | statement | connection 4| url jdbc:h2:mem:library
insert into members (name,id) values (?,?)
insert into members (name,id) values ('Kertu','m1');
2025-12-19T22:44:33.167+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073166 | took 0ms | commit | connection 4| url jdbc:h2:mem:library

;
2025-12-19T22:44:33.169+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073169 | took 0ms | statement | connection 5| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m2';
2025-12-19T22:44:33.170+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073170 | took 0ms | statement | connection 5| url jdbc:h2:mem:library
insert into members (name,id) values (?,?)
insert into members (name,id) values ('Rasmus','m2');
2025-12-19T22:44:33.171+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073171 | took 0ms | commit | connection 5| url jdbc:h2:mem:library

;
2025-12-19T22:44:33.172+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073172 | took 0ms | statement | connection 6| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m3';
2025-12-19T22:44:33.174+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073174 | took 0ms | statement | connection 6| url jdbc:h2:mem:library
insert into members (name,id) values (?,?)
insert into members (name,id) values ('Liis','m3');
2025-12-19T22:44:33.174+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073174 | took 0ms | commit | connection 6| url jdbc:h2:mem:library

;
2025-12-19T22:44:33.176+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073176 | took 0ms | statement | connection 7| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m4';
2025-12-19T22:44:33.177+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073177 | took 0ms | statement | connection 7| url jdbc:h2:mem:library
insert into members (name,id) values (?,?)
insert into members (name,id) values ('Markus','m4');
2025-12-19T22:44:33.178+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073178 | took 0ms | commit | connection 7| url jdbc:h2:mem:library

;
2025-12-19T22:44:33.182+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073182 | took 0ms | statement | connection 8| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b1';
2025-12-19T22:44:33.190+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073190 | took 0ms | statement | connection 8| url jdbc:h2:mem:library
insert into books (due_date,loaned_to,title,id) values (?,?,?,?)
insert into books (due_date,loaned_to,title,id) values (NULL,NULL,'Clean Code','b1');
2025-12-19T22:44:33.194+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073194 | took 0ms | commit | connection 8| url jdbc:h2:mem:library

;
2025-12-19T22:44:33.196+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073196 | took 0ms | statement | connection 9| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b2';
2025-12-19T22:44:33.197+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073197 | took 0ms | statement | connection 9| url jdbc:h2:mem:library
insert into books (due_date,loaned_to,title,id) values (?,?,?,?)
insert into books (due_date,loaned_to,title,id) values (NULL,NULL,'Domain-Driven Design','b2');
2025-12-19T22:44:33.198+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073198 | took 0ms | commit | connection 9| url jdbc:h2:mem:library

;
2025-12-19T22:44:33.199+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073199 | took 0ms | statement | connection 10| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b3';
2025-12-19T22:44:33.201+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073201 | took 0ms | statement | connection 10| url jdbc:h2:mem:library
insert into books (due_date,loaned_to,title,id) values (?,?,?,?)
insert into books (due_date,loaned_to,title,id) values (NULL,NULL,'Refactoring','b3');
2025-12-19T22:44:33.201+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073201 | took 0ms | commit | connection 10| url jdbc:h2:mem:library

;
2025-12-19T22:44:33.203+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073202 | took 0ms | statement | connection 11| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b4';
2025-12-19T22:44:33.204+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073204 | took 0ms | statement | connection 11| url jdbc:h2:mem:library
insert into books (due_date,loaned_to,title,id) values (?,?,?,?)
insert into books (due_date,loaned_to,title,id) values (NULL,NULL,'Effective Java','b4');
2025-12-19T22:44:33.205+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073205 | took 0ms | commit | connection 11| url jdbc:h2:mem:library

;
2025-12-19T22:44:33.206+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073206 | took 0ms | statement | connection 12| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b5';
2025-12-19T22:44:33.207+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073207 | took 0ms | statement | connection 12| url jdbc:h2:mem:library
insert into books (due_date,loaned_to,title,id) values (?,?,?,?)
insert into books (due_date,loaned_to,title,id) values (NULL,NULL,'Design Patterns','b5');
2025-12-19T22:44:33.208+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073208 | took 0ms | commit | connection 12| url jdbc:h2:mem:library

;
2025-12-19T22:44:33.209+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073209 | took 0ms | statement | connection 13| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b6';
2025-12-19T22:44:33.210+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073210 | took 0ms | statement | connection 13| url jdbc:h2:mem:library
insert into books (due_date,loaned_to,title,id) values (?,?,?,?)
insert into books (due_date,loaned_to,title,id) values (NULL,NULL,'The Pragmatic Programmer','b6');
2025-12-19T22:44:33.211+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177073211 | took 0ms | commit | connection 13| url jdbc:h2:mem:library

;
2025-12-19T22:44:33.638+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-19T22:44:33.639+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-19T22:44:33.639+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-12-19T22:44:33.722+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-1] p6spy                                    : #1766177073722 | took 0ms | statement | connection 14| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b1';
2025-12-19T22:44:33.727+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-1] p6spy                                    : #1766177073727 | took 0ms | commit | connection 14| url jdbc:h2:mem:library

;
2025-12-19T22:44:33.983+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-1] p6spy                                    : #1766177073983 | took 1ms | statement | connection 14| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:33.985+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-1] p6spy                                    : #1766177073985 | took 0ms | commit | connection 14| url jdbc:h2:mem:library

;
2025-12-19T22:44:33.987+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-1] p6spy                                    : #1766177073987 | took 0ms | statement | connection 14| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:33.988+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-1] p6spy                                    : #1766177073988 | took 0ms | commit | connection 14| url jdbc:h2:mem:library

;
2025-12-19T22:44:33.996+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-1] p6spy                                    : #1766177073996 | took 0ms | statement | connection 14| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:33.997+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-1] p6spy                                    : #1766177073997 | took 0ms | commit | connection 14| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.000+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-1] p6spy                                    : #1766177074000 | took 0ms | statement | connection 14| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:34.008+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-1] p6spy                                    : #1766177074008 | took 0ms | statement | connection 14| url jdbc:h2:mem:library
update books set due_date=?,loaned_to=?,title=? where id=?
update books set due_date='2026-01-02T00:00:00.000+0200',loaned_to='m1',title='Clean Code' where id='b1';
2025-12-19T22:44:34.010+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-1] p6spy                                    : #1766177074010 | took 0ms | commit | connection 14| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.065+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-2] p6spy                                    : #1766177074065 | took 0ms | statement | connection 15| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b1';
2025-12-19T22:44:34.067+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-2] p6spy                                    : #1766177074067 | took 0ms | commit | connection 15| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.068+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-2] p6spy                                    : #1766177074068 | took 0ms | statement | connection 15| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:34.079+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-2] p6spy                                    : #1766177074079 | took 0ms | statement | connection 15| url jdbc:h2:mem:library
update books set due_date=?,loaned_to=?,title=? where id=?
update books set due_date=NULL,loaned_to=NULL,title='Clean Code' where id='b1';
2025-12-19T22:44:34.080+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-2] p6spy                                    : #1766177074080 | took 0ms | commit | connection 15| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.095+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-3] p6spy                                    : #1766177074095 | took 0ms | statement | connection 16| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:34.096+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-3] p6spy                                    : #1766177074096 | took 0ms | commit | connection 16| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.105+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-3] p6spy                                    : #1766177074105 | took 0ms | statement | connection 16| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:34.106+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-3] p6spy                                    : #1766177074106 | took 0ms | statement | connection 16| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:34.106+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-3] p6spy                                    : #1766177074106 | took 0ms | statement | connection 16| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:34.106+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-3] p6spy                                    : #1766177074106 | took 0ms | statement | connection 16| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:34.107+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-3] p6spy                                    : #1766177074107 | took 0ms | statement | connection 16| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:34.107+02:00  INFO 1050170 --- [library-api] [o-auto-1-exec-3] p6spy                                    : #1766177074107 | took 0ms | statement | connection 16| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:34.124+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:34.126+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-19T22:44:34.130+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.



888b    888                  888             888      888      8888888888        d8888 8888888b.        .d8888b.   .d8888b.   .d8888b.   .d8888b.   
8888b   888                  888             888      888      888              d88888 888   Y88b      d88P  Y88b d88P  Y88b d88P  Y88b d88P  Y88b  
88888b  888                  888             888      888      888             d88P888 888    888             888 888    888        888 888         
888Y88b 888  .d88b.  888d888 888888  8888b.  888      888      8888888        d88P 888 888   d88P           .d88P 888    888      .d88P 888d888b.   
888 Y88b888 d88""88b 888P"   888        "88b 888      888      888           d88P  888 8888888P"        .od888P"  888    888  .od888P"  888P "Y88b  
888  Y88888 888  888 888     888    .d888888 888      888      888          d88P   888 888             d88P"      888    888 d88P"      888    888  
888   Y8888 Y88..88P 888     Y88b.  888  888 888      888      888         d8888888888 888             888"       Y88b  d88P 888"       Y88b  d88P  
888    Y888  "Y88P"  888      "Y888 "Y888888 888      88888888 8888888888 d88P     888 888             888888888   "Y8888P"  888888888   "Y8888P"   
                                                                                                                                                    
                                                                                                                                                    
                                                                                                                                                    
 .d8888b.                888 d8b                               d8888                   d8b                                                   888    
d88P  Y88b               888 Y8P                              d88888                   Y8P                                                   888    
888    888               888                                 d88P888                                                                         888    
888         .d88b.   .d88888 888 88888b.   .d88b.           d88P 888 .d8888b  .d8888b  888  .d88b.  88888b.  88888b.d88b.   .d88b.  88888b.  888888 
888        d88""88b d88" 888 888 888 "88b d88P"88b         d88P  888 88K      88K      888 d88P"88b 888 "88b 888 "888 "88b d8P  Y8b 888 "88b 888    
888    888 888  888 888  888 888 888  888 888  888        d88P   888 "Y8888b. "Y8888b. 888 888  888 888  888 888  888  888 88888888 888  888 888    
Y88b  d88P Y88..88P Y88b 888 888 888  888 Y88b 888       d8888888888      X88      X88 888 Y88b 888 888  888 888  888  888 Y8b.     888  888 Y88b.  
 "Y8888P"   "Y88P"   "Y88888 888 888  888  "Y88888      d88P     888  88888P'  88888P' 888  "Y88888 888  888 888  888  888  "Y8888  888  888  "Y888 
                                               888                                              888                                                 
                                          Y8b d88P                                         Y8b d88P                                                 
                                           "Y88P"                                           "Y88P"                                                                                                 

H2 console: http://localhost:0/h2-console
API:        http://localhost:0/api

2025-12-19T22:44:34.167+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Starting ApiIntegrationTest using Java 21.0.9 with PID 1050170 (started by kooduser in /home/kooduser/Documents/Nortal Test Task/nortal-leap-2026-test-assignment/backend/api)
2025-12-19T22:44:34.168+02:00 DEBUG 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-12-19T22:44:34.168+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : No active profile set, falling back to 1 default profile: "default"
2025-12-19T22:44:34.325+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-19T22:44:34.328+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 2 JPA repository interfaces.
2025-12-19T22:44:34.440+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2025-12-19T22:44:34.441+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-19T22:44:34.441+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-12-19T22:44:34.449+02:00  INFO 1050170 --- [library-api] [    Test worker] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-19T22:44:34.449+02:00  INFO 1050170 --- [library-api] [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 278 ms
2025-12-19T22:44:34.467+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-12-19T22:44:34.468+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:library user=SA
2025-12-19T22:44:34.468+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-12-19T22:44:34.468+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:library'
2025-12-19T22:44:34.486+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074486 | took 0ms | statement | connection 18| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL )
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL );
2025-12-19T22:44:34.487+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074487 | took 0ms | statement | connection 18| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE )
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE );
2025-12-19T22:44:34.487+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074487 | took 0ms | statement | connection 18| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) )
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) );
2025-12-19T22:44:34.496+02:00  INFO 1050170 --- [library-api] [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-19T22:44:34.497+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-19T22:44:34.501+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-19T22:44:34.549+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-19T22:44:34.551+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074551 | took 0ms | statement | connection 20| url jdbc:h2:mem:library
select * from INFORMATION_SCHEMA.SEQUENCES
select * from INFORMATION_SCHEMA.SEQUENCES;
2025-12-19T22:44:34.553+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074553 | took 0ms | statement | connection 20| url jdbc:h2:mem:library
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0;
2025-12-19T22:44:34.554+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:34.768+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 37495 (http) with context path '/'
2025-12-19T22:44:34.770+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Started ApiIntegrationTest in 0.627 seconds (process running for 6.279)
2025-12-19T22:44:34.774+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074774 | took 0ms | statement | connection 21| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:34.776+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074776 | took 0ms | commit | connection 21| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.777+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074777 | took 0ms | statement | connection 22| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m2';
2025-12-19T22:44:34.777+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074777 | took 0ms | commit | connection 22| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.778+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074778 | took 0ms | statement | connection 23| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m3';
2025-12-19T22:44:34.779+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074779 | took 0ms | commit | connection 23| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.780+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074780 | took 0ms | statement | connection 24| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m4';
2025-12-19T22:44:34.781+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074781 | took 0ms | commit | connection 24| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.784+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074784 | took 0ms | statement | connection 25| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b1';
2025-12-19T22:44:34.786+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074786 | took 0ms | statement | connection 25| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:34.786+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074786 | took 0ms | commit | connection 25| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.788+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074788 | took 0ms | statement | connection 26| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b2';
2025-12-19T22:44:34.789+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074789 | took 0ms | statement | connection 26| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:34.790+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074790 | took 0ms | commit | connection 26| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.791+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074791 | took 0ms | statement | connection 27| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b3';
2025-12-19T22:44:34.793+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074793 | took 0ms | statement | connection 27| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:34.793+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074793 | took 0ms | commit | connection 27| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.795+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074795 | took 0ms | statement | connection 28| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b4';
2025-12-19T22:44:34.796+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074796 | took 0ms | statement | connection 28| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:34.796+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074796 | took 0ms | commit | connection 28| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.797+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074797 | took 0ms | statement | connection 29| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b5';
2025-12-19T22:44:34.798+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074798 | took 0ms | statement | connection 29| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:34.799+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074799 | took 0ms | commit | connection 29| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.800+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074800 | took 0ms | statement | connection 30| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b6';
2025-12-19T22:44:34.801+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074801 | took 0ms | statement | connection 30| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:34.802+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177074802 | took 0ms | commit | connection 30| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.812+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-19T22:44:34.812+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-19T22:44:34.813+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-12-19T22:44:34.822+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-1] p6spy                                    : #1766177074822 | took 0ms | statement | connection 31| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='vm1';
2025-12-19T22:44:34.824+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-1] p6spy                                    : #1766177074824 | took 0ms | statement | connection 31| url jdbc:h2:mem:library
insert into members (name,id) values (?,?)
insert into members (name,id) values ('Visible Member','vm1');
2025-12-19T22:44:34.824+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-1] p6spy                                    : #1766177074824 | took 0ms | commit | connection 31| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.836+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-2] p6spy                                    : #1766177074835 | took 0ms | statement | connection 32| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='vm1';
2025-12-19T22:44:34.836+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-2] p6spy                                    : #1766177074836 | took 0ms | commit | connection 32| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.838+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-2] p6spy                                    : #1766177074838 | took 0ms | statement | connection 32| url jdbc:h2:mem:library
update members set name=? where id=?
update members set name='Renamed' where id='vm1';
2025-12-19T22:44:34.838+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-2] p6spy                                    : #1766177074838 | took 0ms | commit | connection 32| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.848+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-3] p6spy                                    : #1766177074848 | took 0ms | statement | connection 33| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0
select m1_0.id,m1_0.name from members m1_0;
2025-12-19T22:44:34.849+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-3] p6spy                                    : #1766177074849 | took 0ms | commit | connection 33| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.859+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-4] p6spy                                    : #1766177074859 | took 0ms | statement | connection 34| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='vm1';
2025-12-19T22:44:34.860+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-4] p6spy                                    : #1766177074860 | took 0ms | commit | connection 34| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.864+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-4] p6spy                                    : #1766177074864 | took 0ms | statement | connection 34| url jdbc:h2:mem:library
delete from members where id=?
delete from members where id='vm1';
2025-12-19T22:44:34.865+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-4] p6spy                                    : #1766177074865 | took 0ms | commit | connection 34| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.869+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-5] p6spy                                    : #1766177074869 | took 0ms | statement | connection 35| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0
select m1_0.id,m1_0.name from members m1_0;
2025-12-19T22:44:34.870+02:00  INFO 1050170 --- [library-api] [o-auto-2-exec-5] p6spy                                    : #1766177074870 | took 0ms | commit | connection 35| url jdbc:h2:mem:library

;
2025-12-19T22:44:34.875+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:34.876+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-12-19T22:44:34.876+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.



888b    888                  888             888      888      8888888888        d8888 8888888b.        .d8888b.   .d8888b.   .d8888b.   .d8888b.   
8888b   888                  888             888      888      888              d88888 888   Y88b      d88P  Y88b d88P  Y88b d88P  Y88b d88P  Y88b  
88888b  888                  888             888      888      888             d88P888 888    888             888 888    888        888 888         
888Y88b 888  .d88b.  888d888 888888  8888b.  888      888      8888888        d88P 888 888   d88P           .d88P 888    888      .d88P 888d888b.   
888 Y88b888 d88""88b 888P"   888        "88b 888      888      888           d88P  888 8888888P"        .od888P"  888    888  .od888P"  888P "Y88b  
888  Y88888 888  888 888     888    .d888888 888      888      888          d88P   888 888             d88P"      888    888 d88P"      888    888  
888   Y8888 Y88..88P 888     Y88b.  888  888 888      888      888         d8888888888 888             888"       Y88b  d88P 888"       Y88b  d88P  
888    Y888  "Y88P"  888      "Y888 "Y888888 888      88888888 8888888888 d88P     888 888             888888888   "Y8888P"  888888888   "Y8888P"   
                                                                                                                                                    
                                                                                                                                                    
                                                                                                                                                    
 .d8888b.                888 d8b                               d8888                   d8b                                                   888    
d88P  Y88b               888 Y8P                              d88888                   Y8P                                                   888    
888    888               888                                 d88P888                                                                         888    
888         .d88b.   .d88888 888 88888b.   .d88b.           d88P 888 .d8888b  .d8888b  888  .d88b.  88888b.  88888b.d88b.   .d88b.  88888b.  888888 
888        d88""88b d88" 888 888 888 "88b d88P"88b         d88P  888 88K      88K      888 d88P"88b 888 "88b 888 "888 "88b d8P  Y8b 888 "88b 888    
888    888 888  888 888  888 888 888  888 888  888        d88P   888 "Y8888b. "Y8888b. 888 888  888 888  888 888  888  888 88888888 888  888 888    
Y88b  d88P Y88..88P Y88b 888 888 888  888 Y88b 888       d8888888888      X88      X88 888 Y88b 888 888  888 888  888  888 Y8b.     888  888 Y88b.  
 "Y8888P"   "Y88P"   "Y88888 888 888  888  "Y88888      d88P     888  88888P'  88888P' 888  "Y88888 888  888 888  888  888  "Y8888  888  888  "Y888 
                                               888                                              888                                                 
                                          Y8b d88P                                         Y8b d88P                                                 
                                           "Y88P"                                           "Y88P"                                                                                                 

H2 console: http://localhost:0/h2-console
API:        http://localhost:0/api

2025-12-19T22:44:34.896+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Starting ApiIntegrationTest using Java 21.0.9 with PID 1050170 (started by kooduser in /home/kooduser/Documents/Nortal Test Task/nortal-leap-2026-test-assignment/backend/api)
2025-12-19T22:44:34.896+02:00 DEBUG 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-12-19T22:44:34.896+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : No active profile set, falling back to 1 default profile: "default"
2025-12-19T22:44:34.968+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-19T22:44:34.971+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 2 JPA repository interfaces.
2025-12-19T22:44:35.033+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2025-12-19T22:44:35.034+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-19T22:44:35.034+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-12-19T22:44:35.041+02:00  INFO 1050170 --- [library-api] [    Test worker] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-19T22:44:35.041+02:00  INFO 1050170 --- [library-api] [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 144 ms
2025-12-19T22:44:35.055+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-12-19T22:44:35.056+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:library user=SA
2025-12-19T22:44:35.057+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-12-19T22:44:35.057+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:library'
2025-12-19T22:44:35.069+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075069 | took 0ms | statement | connection 37| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL )
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL );
2025-12-19T22:44:35.069+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075069 | took 0ms | statement | connection 37| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE )
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE );
2025-12-19T22:44:35.070+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075070 | took 0ms | statement | connection 37| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) )
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) );
2025-12-19T22:44:35.077+02:00  INFO 1050170 --- [library-api] [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-19T22:44:35.079+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-19T22:44:35.083+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-19T22:44:35.118+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-19T22:44:35.119+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075119 | took 0ms | statement | connection 39| url jdbc:h2:mem:library
select * from INFORMATION_SCHEMA.SEQUENCES
select * from INFORMATION_SCHEMA.SEQUENCES;
2025-12-19T22:44:35.120+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075120 | took 0ms | statement | connection 39| url jdbc:h2:mem:library
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0;
2025-12-19T22:44:35.120+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:35.241+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 41767 (http) with context path '/'
2025-12-19T22:44:35.243+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Started ApiIntegrationTest in 0.362 seconds (process running for 6.752)
2025-12-19T22:44:35.245+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075245 | took 0ms | statement | connection 40| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:35.246+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075246 | took 0ms | commit | connection 40| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.247+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075247 | took 0ms | statement | connection 41| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m2';
2025-12-19T22:44:35.247+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075247 | took 0ms | commit | connection 41| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.248+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075248 | took 0ms | statement | connection 42| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m3';
2025-12-19T22:44:35.248+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075248 | took 0ms | commit | connection 42| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.249+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075249 | took 0ms | statement | connection 43| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m4';
2025-12-19T22:44:35.249+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075249 | took 0ms | commit | connection 43| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.251+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075251 | took 0ms | statement | connection 44| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b1';
2025-12-19T22:44:35.252+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075252 | took 0ms | statement | connection 44| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:35.252+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075252 | took 0ms | commit | connection 44| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.253+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075253 | took 0ms | statement | connection 45| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b2';
2025-12-19T22:44:35.254+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075254 | took 0ms | statement | connection 45| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:35.254+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075254 | took 0ms | commit | connection 45| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.255+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075255 | took 0ms | statement | connection 46| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b3';
2025-12-19T22:44:35.255+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075255 | took 0ms | statement | connection 46| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:35.255+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075255 | took 0ms | commit | connection 46| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.256+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075256 | took 0ms | statement | connection 47| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b4';
2025-12-19T22:44:35.257+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075257 | took 0ms | statement | connection 47| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:35.257+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075257 | took 0ms | commit | connection 47| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.258+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075258 | took 0ms | statement | connection 48| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b5';
2025-12-19T22:44:35.258+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075258 | took 0ms | statement | connection 48| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:35.259+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075259 | took 0ms | commit | connection 48| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.259+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075259 | took 0ms | statement | connection 49| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b6';
2025-12-19T22:44:35.260+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075260 | took 0ms | statement | connection 49| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:35.260+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075260 | took 0ms | commit | connection 49| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.265+02:00  INFO 1050170 --- [library-api] [o-auto-3-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-19T22:44:35.266+02:00  INFO 1050170 --- [library-api] [o-auto-3-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-19T22:44:35.266+02:00  INFO 1050170 --- [library-api] [o-auto-3-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-12-19T22:44:35.269+02:00  INFO 1050170 --- [library-api] [o-auto-3-exec-1] p6spy                                    : #1766177075269 | took 0ms | statement | connection 50| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:35.270+02:00  INFO 1050170 --- [library-api] [o-auto-3-exec-1] p6spy                                    : #1766177075270 | took 0ms | commit | connection 50| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.273+02:00  INFO 1050170 --- [library-api] [o-auto-3-exec-1] p6spy                                    : #1766177075273 | took 0ms | statement | connection 50| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:35.274+02:00  INFO 1050170 --- [library-api] [o-auto-3-exec-1] p6spy                                    : #1766177075274 | took 0ms | statement | connection 50| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:35.274+02:00  INFO 1050170 --- [library-api] [o-auto-3-exec-1] p6spy                                    : #1766177075274 | took 0ms | statement | connection 50| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:35.274+02:00  INFO 1050170 --- [library-api] [o-auto-3-exec-1] p6spy                                    : #1766177075274 | took 0ms | statement | connection 50| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:35.275+02:00  INFO 1050170 --- [library-api] [o-auto-3-exec-1] p6spy                                    : #1766177075275 | took 0ms | statement | connection 50| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:35.275+02:00  INFO 1050170 --- [library-api] [o-auto-3-exec-1] p6spy                                    : #1766177075275 | took 0ms | statement | connection 50| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:35.280+02:00  INFO 1050170 --- [library-api] [o-auto-3-exec-2] p6spy                                    : #1766177075280 | took 0ms | statement | connection 51| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0
select m1_0.id,m1_0.name from members m1_0;
2025-12-19T22:44:35.281+02:00  INFO 1050170 --- [library-api] [o-auto-3-exec-2] p6spy                                    : #1766177075281 | took 0ms | commit | connection 51| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.292+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:35.293+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-12-19T22:44:35.311+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.



888b    888                  888             888      888      8888888888        d8888 8888888b.        .d8888b.   .d8888b.   .d8888b.   .d8888b.   
8888b   888                  888             888      888      888              d88888 888   Y88b      d88P  Y88b d88P  Y88b d88P  Y88b d88P  Y88b  
88888b  888                  888             888      888      888             d88P888 888    888             888 888    888        888 888         
888Y88b 888  .d88b.  888d888 888888  8888b.  888      888      8888888        d88P 888 888   d88P           .d88P 888    888      .d88P 888d888b.   
888 Y88b888 d88""88b 888P"   888        "88b 888      888      888           d88P  888 8888888P"        .od888P"  888    888  .od888P"  888P "Y88b  
888  Y88888 888  888 888     888    .d888888 888      888      888          d88P   888 888             d88P"      888    888 d88P"      888    888  
888   Y8888 Y88..88P 888     Y88b.  888  888 888      888      888         d8888888888 888             888"       Y88b  d88P 888"       Y88b  d88P  
888    Y888  "Y88P"  888      "Y888 "Y888888 888      88888888 8888888888 d88P     888 888             888888888   "Y8888P"  888888888   "Y8888P"   
                                                                                                                                                    
                                                                                                                                                    
                                                                                                                                                    
 .d8888b.                888 d8b                               d8888                   d8b                                                   888    
d88P  Y88b               888 Y8P                              d88888                   Y8P                                                   888    
888    888               888                                 d88P888                                                                         888    
888         .d88b.   .d88888 888 88888b.   .d88b.           d88P 888 .d8888b  .d8888b  888  .d88b.  88888b.  88888b.d88b.   .d88b.  88888b.  888888 
888        d88""88b d88" 888 888 888 "88b d88P"88b         d88P  888 88K      88K      888 d88P"88b 888 "88b 888 "888 "88b d8P  Y8b 888 "88b 888    
888    888 888  888 888  888 888 888  888 888  888        d88P   888 "Y8888b. "Y8888b. 888 888  888 888  888 888  888  888 88888888 888  888 888    
Y88b  d88P Y88..88P Y88b 888 888 888  888 Y88b 888       d8888888888      X88      X88 888 Y88b 888 888  888 888  888  888 Y8b.     888  888 Y88b.  
 "Y8888P"   "Y88P"   "Y88888 888 888  888  "Y88888      d88P     888  88888P'  88888P' 888  "Y88888 888  888 888  888  888  "Y8888  888  888  "Y888 
                                               888                                              888                                                 
                                          Y8b d88P                                         Y8b d88P                                                 
                                           "Y88P"                                           "Y88P"                                                                                                 

H2 console: http://localhost:0/h2-console
API:        http://localhost:0/api

2025-12-19T22:44:35.331+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Starting ApiIntegrationTest using Java 21.0.9 with PID 1050170 (started by kooduser in /home/kooduser/Documents/Nortal Test Task/nortal-leap-2026-test-assignment/backend/api)
2025-12-19T22:44:35.332+02:00 DEBUG 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-12-19T22:44:35.332+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : No active profile set, falling back to 1 default profile: "default"
2025-12-19T22:44:35.384+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-19T22:44:35.386+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 1 ms. Found 2 JPA repository interfaces.
2025-12-19T22:44:35.453+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2025-12-19T22:44:35.454+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-19T22:44:35.455+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-12-19T22:44:35.462+02:00  INFO 1050170 --- [library-api] [    Test worker] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-19T22:44:35.463+02:00  INFO 1050170 --- [library-api] [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 130 ms
2025-12-19T22:44:35.475+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2025-12-19T22:44:35.476+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-4 - Added connection conn26: url=jdbc:h2:mem:library user=SA
2025-12-19T22:44:35.476+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2025-12-19T22:44:35.477+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:library'
2025-12-19T22:44:35.489+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075489 | took 0ms | statement | connection 53| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL )
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL );
2025-12-19T22:44:35.489+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075489 | took 0ms | statement | connection 53| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE )
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE );
2025-12-19T22:44:35.489+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075489 | took 0ms | statement | connection 53| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) )
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) );
2025-12-19T22:44:35.497+02:00  INFO 1050170 --- [library-api] [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-19T22:44:35.499+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-19T22:44:35.502+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-19T22:44:35.539+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-19T22:44:35.540+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075540 | took 0ms | statement | connection 55| url jdbc:h2:mem:library
select * from INFORMATION_SCHEMA.SEQUENCES
select * from INFORMATION_SCHEMA.SEQUENCES;
2025-12-19T22:44:35.541+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075541 | took 0ms | statement | connection 55| url jdbc:h2:mem:library
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0;
2025-12-19T22:44:35.541+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:35.670+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 39375 (http) with context path '/'
2025-12-19T22:44:35.672+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Started ApiIntegrationTest in 0.357 seconds (process running for 7.181)
2025-12-19T22:44:35.686+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075686 | took 0ms | statement | connection 56| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:35.688+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075688 | took 0ms | commit | connection 56| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.689+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075689 | took 0ms | statement | connection 57| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m2';
2025-12-19T22:44:35.690+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075690 | took 0ms | commit | connection 57| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.691+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075691 | took 0ms | statement | connection 58| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m3';
2025-12-19T22:44:35.692+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075692 | took 0ms | commit | connection 58| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.693+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075693 | took 0ms | statement | connection 59| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m4';
2025-12-19T22:44:35.693+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075693 | took 0ms | commit | connection 59| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.695+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075695 | took 0ms | statement | connection 60| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b1';
2025-12-19T22:44:35.696+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075696 | took 0ms | statement | connection 60| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:35.697+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075697 | took 0ms | commit | connection 60| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.698+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075698 | took 0ms | statement | connection 61| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b2';
2025-12-19T22:44:35.699+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075699 | took 0ms | statement | connection 61| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:35.700+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075700 | took 0ms | commit | connection 61| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.701+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075701 | took 0ms | statement | connection 62| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b3';
2025-12-19T22:44:35.702+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075702 | took 0ms | statement | connection 62| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:35.702+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075702 | took 0ms | commit | connection 62| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.703+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075703 | took 0ms | statement | connection 63| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b4';
2025-12-19T22:44:35.704+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075704 | took 0ms | statement | connection 63| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:35.705+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075705 | took 0ms | commit | connection 63| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.706+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075706 | took 0ms | statement | connection 64| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b5';
2025-12-19T22:44:35.707+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075707 | took 0ms | statement | connection 64| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:35.707+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075707 | took 0ms | commit | connection 64| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.708+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075708 | took 0ms | statement | connection 65| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b6';
2025-12-19T22:44:35.709+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075709 | took 0ms | statement | connection 65| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:35.710+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177075710 | took 0ms | commit | connection 65| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.730+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-19T22:44:35.731+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-19T22:44:35.732+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-12-19T22:44:35.742+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-1] p6spy                                    : #1766177075742 | took 0ms | statement | connection 66| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='vb1';
2025-12-19T22:44:35.744+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-1] p6spy                                    : #1766177075744 | took 0ms | statement | connection 66| url jdbc:h2:mem:library
insert into books (due_date,loaned_to,title,id) values (?,?,?,?)
insert into books (due_date,loaned_to,title,id) values (NULL,NULL,'Visible Book','vb1');
2025-12-19T22:44:35.744+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-1] p6spy                                    : #1766177075744 | took 0ms | commit | connection 66| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.754+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-2] p6spy                                    : #1766177075754 | took 0ms | statement | connection 67| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='vb1';
2025-12-19T22:44:35.755+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-2] p6spy                                    : #1766177075755 | took 0ms | commit | connection 67| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.756+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-2] p6spy                                    : #1766177075756 | took 0ms | statement | connection 67| url jdbc:h2:mem:library
update books set due_date=?,loaned_to=?,title=? where id=?
update books set due_date=NULL,loaned_to=NULL,title='Renamed' where id='vb1';
2025-12-19T22:44:35.756+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-2] p6spy                                    : #1766177075756 | took 0ms | commit | connection 67| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.764+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-3] p6spy                                    : #1766177075764 | took 0ms | statement | connection 68| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:35.765+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-3] p6spy                                    : #1766177075765 | took 0ms | commit | connection 68| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.770+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-3] p6spy                                    : #1766177075770 | took 0ms | statement | connection 68| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:35.771+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-3] p6spy                                    : #1766177075771 | took 0ms | statement | connection 68| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:35.771+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-3] p6spy                                    : #1766177075771 | took 0ms | statement | connection 68| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:35.772+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-3] p6spy                                    : #1766177075772 | took 0ms | statement | connection 68| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:35.772+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-3] p6spy                                    : #1766177075772 | took 0ms | statement | connection 68| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:35.773+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-3] p6spy                                    : #1766177075773 | took 0ms | statement | connection 68| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:35.773+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-3] p6spy                                    : #1766177075773 | took 0ms | statement | connection 68| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='vb1';
2025-12-19T22:44:35.780+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-4] p6spy                                    : #1766177075780 | took 0ms | statement | connection 69| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='vb1';
2025-12-19T22:44:35.781+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-4] p6spy                                    : #1766177075781 | took 0ms | commit | connection 69| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.784+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-4] p6spy                                    : #1766177075784 | took 0ms | statement | connection 69| url jdbc:h2:mem:library
delete from book_reservations where book_id=?
delete from book_reservations where book_id='vb1';
2025-12-19T22:44:35.785+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-4] p6spy                                    : #1766177075785 | took 0ms | statement | connection 69| url jdbc:h2:mem:library
delete from books where id=?
delete from books where id='vb1';
2025-12-19T22:44:35.785+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-4] p6spy                                    : #1766177075785 | took 0ms | commit | connection 69| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.789+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-5] p6spy                                    : #1766177075789 | took 0ms | statement | connection 70| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:35.791+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-5] p6spy                                    : #1766177075791 | took 0ms | commit | connection 70| url jdbc:h2:mem:library

;
2025-12-19T22:44:35.792+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-5] p6spy                                    : #1766177075792 | took 0ms | statement | connection 70| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:35.793+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-5] p6spy                                    : #1766177075793 | took 0ms | statement | connection 70| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:35.793+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-5] p6spy                                    : #1766177075793 | took 0ms | statement | connection 70| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:35.793+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-5] p6spy                                    : #1766177075793 | took 0ms | statement | connection 70| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:35.794+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-5] p6spy                                    : #1766177075794 | took 0ms | statement | connection 70| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:35.794+02:00  INFO 1050170 --- [library-api] [o-auto-4-exec-5] p6spy                                    : #1766177075794 | took 0ms | statement | connection 70| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:35.800+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:35.801+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown initiated...
2025-12-19T22:44:35.826+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown completed.



888b    888                  888             888      888      8888888888        d8888 8888888b.        .d8888b.   .d8888b.   .d8888b.   .d8888b.   
8888b   888                  888             888      888      888              d88888 888   Y88b      d88P  Y88b d88P  Y88b d88P  Y88b d88P  Y88b  
88888b  888                  888             888      888      888             d88P888 888    888             888 888    888        888 888         
888Y88b 888  .d88b.  888d888 888888  8888b.  888      888      8888888        d88P 888 888   d88P           .d88P 888    888      .d88P 888d888b.   
888 Y88b888 d88""88b 888P"   888        "88b 888      888      888           d88P  888 8888888P"        .od888P"  888    888  .od888P"  888P "Y88b  
888  Y88888 888  888 888     888    .d888888 888      888      888          d88P   888 888             d88P"      888    888 d88P"      888    888  
888   Y8888 Y88..88P 888     Y88b.  888  888 888      888      888         d8888888888 888             888"       Y88b  d88P 888"       Y88b  d88P  
888    Y888  "Y88P"  888      "Y888 "Y888888 888      88888888 8888888888 d88P     888 888             888888888   "Y8888P"  888888888   "Y8888P"   
                                                                                                                                                    
                                                                                                                                                    
                                                                                                                                                    
 .d8888b.                888 d8b                               d8888                   d8b                                                   888    
d88P  Y88b               888 Y8P                              d88888                   Y8P                                                   888    
888    888               888                                 d88P888                                                                         888    
888         .d88b.   .d88888 888 88888b.   .d88b.           d88P 888 .d8888b  .d8888b  888  .d88b.  88888b.  88888b.d88b.   .d88b.  88888b.  888888 
888        d88""88b d88" 888 888 888 "88b d88P"88b         d88P  888 88K      88K      888 d88P"88b 888 "88b 888 "888 "88b d8P  Y8b 888 "88b 888    
888    888 888  888 888  888 888 888  888 888  888        d88P   888 "Y8888b. "Y8888b. 888 888  888 888  888 888  888  888 88888888 888  888 888    
Y88b  d88P Y88..88P Y88b 888 888 888  888 Y88b 888       d8888888888      X88      X88 888 Y88b 888 888  888 888  888  888 Y8b.     888  888 Y88b.  
 "Y8888P"   "Y88P"   "Y88888 888 888  888  "Y88888      d88P     888  88888P'  88888P' 888  "Y88888 888  888 888  888  888  "Y8888  888  888  "Y888 
                                               888                                              888                                                 
                                          Y8b d88P                                         Y8b d88P                                                 
                                           "Y88P"                                           "Y88P"                                                                                                 

H2 console: http://localhost:0/h2-console
API:        http://localhost:0/api

2025-12-19T22:44:35.850+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Starting ApiIntegrationTest using Java 21.0.9 with PID 1050170 (started by kooduser in /home/kooduser/Documents/Nortal Test Task/nortal-leap-2026-test-assignment/backend/api)
2025-12-19T22:44:35.850+02:00 DEBUG 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-12-19T22:44:35.850+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : No active profile set, falling back to 1 default profile: "default"
2025-12-19T22:44:35.901+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-19T22:44:35.904+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 2 JPA repository interfaces.
2025-12-19T22:44:35.971+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2025-12-19T22:44:35.972+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-19T22:44:35.972+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-12-19T22:44:35.980+02:00  INFO 1050170 --- [library-api] [    Test worker] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-19T22:44:35.980+02:00  INFO 1050170 --- [library-api] [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 129 ms
2025-12-19T22:44:35.996+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Starting...
2025-12-19T22:44:35.997+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-5 - Added connection conn35: url=jdbc:h2:mem:library user=SA
2025-12-19T22:44:35.998+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Start completed.
2025-12-19T22:44:35.998+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:library'
2025-12-19T22:44:36.008+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076008 | took 0ms | statement | connection 72| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL )
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL );
2025-12-19T22:44:36.008+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076008 | took 0ms | statement | connection 72| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE )
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE );
2025-12-19T22:44:36.008+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076008 | took 0ms | statement | connection 72| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) )
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) );
2025-12-19T22:44:36.015+02:00  INFO 1050170 --- [library-api] [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-19T22:44:36.016+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-19T22:44:36.020+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-19T22:44:36.057+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-19T22:44:36.058+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076058 | took 0ms | statement | connection 74| url jdbc:h2:mem:library
select * from INFORMATION_SCHEMA.SEQUENCES
select * from INFORMATION_SCHEMA.SEQUENCES;
2025-12-19T22:44:36.060+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076060 | took 0ms | statement | connection 74| url jdbc:h2:mem:library
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0;
2025-12-19T22:44:36.060+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:36.188+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 34303 (http) with context path '/'
2025-12-19T22:44:36.192+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Started ApiIntegrationTest in 0.36 seconds (process running for 7.702)
2025-12-19T22:44:36.195+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076195 | took 0ms | statement | connection 75| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:36.196+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076196 | took 0ms | commit | connection 75| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.196+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076196 | took 0ms | statement | connection 76| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m2';
2025-12-19T22:44:36.197+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076197 | took 0ms | commit | connection 76| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.198+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076197 | took 0ms | statement | connection 77| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m3';
2025-12-19T22:44:36.198+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076198 | took 0ms | commit | connection 77| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.199+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076199 | took 0ms | statement | connection 78| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m4';
2025-12-19T22:44:36.199+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076199 | took 0ms | commit | connection 78| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.200+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076200 | took 0ms | statement | connection 79| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b1';
2025-12-19T22:44:36.201+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076201 | took 0ms | statement | connection 79| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:36.202+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076202 | took 0ms | commit | connection 79| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.203+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076203 | took 0ms | statement | connection 80| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b2';
2025-12-19T22:44:36.204+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076204 | took 0ms | statement | connection 80| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:36.204+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076204 | took 0ms | commit | connection 80| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.205+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076205 | took 0ms | statement | connection 81| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b3';
2025-12-19T22:44:36.205+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076205 | took 0ms | statement | connection 81| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:36.206+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076206 | took 0ms | commit | connection 81| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.206+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076206 | took 0ms | statement | connection 82| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b4';
2025-12-19T22:44:36.207+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076207 | took 0ms | statement | connection 82| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:36.208+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076208 | took 0ms | commit | connection 82| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.208+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076208 | took 0ms | statement | connection 83| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b5';
2025-12-19T22:44:36.209+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076209 | took 0ms | statement | connection 83| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:36.210+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076210 | took 0ms | commit | connection 83| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.211+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076211 | took 0ms | statement | connection 84| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b6';
2025-12-19T22:44:36.211+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076211 | took 0ms | statement | connection 84| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:36.212+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076212 | took 0ms | commit | connection 84| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.217+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-19T22:44:36.217+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-19T22:44:36.218+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-12-19T22:44:36.224+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-1] p6spy                                    : #1766177076224 | took 0ms | statement | connection 85| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b3';
2025-12-19T22:44:36.225+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-1] p6spy                                    : #1766177076225 | took 0ms | commit | connection 85| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.227+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-1] p6spy                                    : #1766177076227 | took 0ms | statement | connection 85| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:36.228+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-1] p6spy                                    : #1766177076228 | took 0ms | commit | connection 85| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.228+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-1] p6spy                                    : #1766177076228 | took 0ms | statement | connection 85| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:36.229+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-1] p6spy                                    : #1766177076229 | took 0ms | commit | connection 85| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.230+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-1] p6spy                                    : #1766177076230 | took 0ms | statement | connection 85| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:36.231+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-1] p6spy                                    : #1766177076231 | took 0ms | commit | connection 85| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.232+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-1] p6spy                                    : #1766177076232 | took 0ms | statement | connection 85| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:36.233+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-1] p6spy                                    : #1766177076233 | took 0ms | statement | connection 85| url jdbc:h2:mem:library
update books set due_date=?,loaned_to=?,title=? where id=?
update books set due_date='2026-01-02T00:00:00.000+0200',loaned_to='m1',title='Refactoring' where id='b3';
2025-12-19T22:44:36.233+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-1] p6spy                                    : #1766177076233 | took 0ms | commit | connection 85| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.240+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-2] p6spy                                    : #1766177076240 | took 0ms | statement | connection 86| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:36.241+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-2] p6spy                                    : #1766177076241 | took 0ms | commit | connection 86| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.244+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-2] p6spy                                    : #1766177076244 | took 0ms | statement | connection 86| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:36.245+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-2] p6spy                                    : #1766177076245 | took 0ms | statement | connection 86| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:36.245+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-2] p6spy                                    : #1766177076245 | took 0ms | statement | connection 86| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:36.246+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-2] p6spy                                    : #1766177076246 | took 0ms | statement | connection 86| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:36.246+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-2] p6spy                                    : #1766177076246 | took 0ms | statement | connection 86| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:36.246+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-2] p6spy                                    : #1766177076246 | took 0ms | statement | connection 86| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:36.260+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-3] p6spy                                    : #1766177076260 | took 0ms | statement | connection 87| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b3';
2025-12-19T22:44:36.261+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-3] p6spy                                    : #1766177076261 | took 0ms | commit | connection 87| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.262+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-3] p6spy                                    : #1766177076262 | took 0ms | statement | connection 87| url jdbc:h2:mem:library
update books set due_date=?,loaned_to=?,title=? where id=?
update books set due_date='2026-01-05T00:00:00.000+0200',loaned_to='m1',title='Refactoring' where id='b3';
2025-12-19T22:44:36.263+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-3] p6spy                                    : #1766177076263 | took 0ms | commit | connection 87| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.267+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-4] p6spy                                    : #1766177076267 | took 0ms | statement | connection 88| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:36.268+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-4] p6spy                                    : #1766177076268 | took 0ms | commit | connection 88| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.269+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-4] p6spy                                    : #1766177076269 | took 0ms | statement | connection 88| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:36.270+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-4] p6spy                                    : #1766177076270 | took 0ms | statement | connection 88| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:36.270+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-4] p6spy                                    : #1766177076270 | took 0ms | statement | connection 88| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:36.270+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-4] p6spy                                    : #1766177076270 | took 0ms | statement | connection 88| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:36.271+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-4] p6spy                                    : #1766177076271 | took 0ms | statement | connection 88| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:36.271+02:00  INFO 1050170 --- [library-api] [o-auto-5-exec-4] p6spy                                    : #1766177076271 | took 0ms | statement | connection 88| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:36.275+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:36.276+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown initiated...
2025-12-19T22:44:36.282+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown completed.



888b    888                  888             888      888      8888888888        d8888 8888888b.        .d8888b.   .d8888b.   .d8888b.   .d8888b.   
8888b   888                  888             888      888      888              d88888 888   Y88b      d88P  Y88b d88P  Y88b d88P  Y88b d88P  Y88b  
88888b  888                  888             888      888      888             d88P888 888    888             888 888    888        888 888         
888Y88b 888  .d88b.  888d888 888888  8888b.  888      888      8888888        d88P 888 888   d88P           .d88P 888    888      .d88P 888d888b.   
888 Y88b888 d88""88b 888P"   888        "88b 888      888      888           d88P  888 8888888P"        .od888P"  888    888  .od888P"  888P "Y88b  
888  Y88888 888  888 888     888    .d888888 888      888      888          d88P   888 888             d88P"      888    888 d88P"      888    888  
888   Y8888 Y88..88P 888     Y88b.  888  888 888      888      888         d8888888888 888             888"       Y88b  d88P 888"       Y88b  d88P  
888    Y888  "Y88P"  888      "Y888 "Y888888 888      88888888 8888888888 d88P     888 888             888888888   "Y8888P"  888888888   "Y8888P"   
                                                                                                                                                    
                                                                                                                                                    
                                                                                                                                                    
 .d8888b.                888 d8b                               d8888                   d8b                                                   888    
d88P  Y88b               888 Y8P                              d88888                   Y8P                                                   888    
888    888               888                                 d88P888                                                                         888    
888         .d88b.   .d88888 888 88888b.   .d88b.           d88P 888 .d8888b  .d8888b  888  .d88b.  88888b.  88888b.d88b.   .d88b.  88888b.  888888 
888        d88""88b d88" 888 888 888 "88b d88P"88b         d88P  888 88K      88K      888 d88P"88b 888 "88b 888 "888 "88b d8P  Y8b 888 "88b 888    
888    888 888  888 888  888 888 888  888 888  888        d88P   888 "Y8888b. "Y8888b. 888 888  888 888  888 888  888  888 88888888 888  888 888    
Y88b  d88P Y88..88P Y88b 888 888 888  888 Y88b 888       d8888888888      X88      X88 888 Y88b 888 888  888 888  888  888 Y8b.     888  888 Y88b.  
 "Y8888P"   "Y88P"   "Y88888 888 888  888  "Y88888      d88P     888  88888P'  88888P' 888  "Y88888 888  888 888  888  888  "Y8888  888  888  "Y888 
                                               888                                              888                                                 
                                          Y8b d88P                                         Y8b d88P                                                 
                                           "Y88P"                                           "Y88P"                                                                                                 

H2 console: http://localhost:0/h2-console
API:        http://localhost:0/api

2025-12-19T22:44:36.304+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Starting ApiIntegrationTest using Java 21.0.9 with PID 1050170 (started by kooduser in /home/kooduser/Documents/Nortal Test Task/nortal-leap-2026-test-assignment/backend/api)
2025-12-19T22:44:36.304+02:00 DEBUG 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-12-19T22:44:36.304+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : No active profile set, falling back to 1 default profile: "default"
2025-12-19T22:44:36.365+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-19T22:44:36.368+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 2 JPA repository interfaces.
2025-12-19T22:44:36.424+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2025-12-19T22:44:36.425+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-19T22:44:36.425+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-12-19T22:44:36.431+02:00  INFO 1050170 --- [library-api] [    Test worker] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-19T22:44:36.431+02:00  INFO 1050170 --- [library-api] [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 125 ms
2025-12-19T22:44:36.443+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Starting...
2025-12-19T22:44:36.444+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-6 - Added connection conn42: url=jdbc:h2:mem:library user=SA
2025-12-19T22:44:36.444+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Start completed.
2025-12-19T22:44:36.444+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:library'
2025-12-19T22:44:36.458+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076458 | took 0ms | statement | connection 90| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL )
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL );
2025-12-19T22:44:36.458+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076458 | took 0ms | statement | connection 90| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE )
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE );
2025-12-19T22:44:36.458+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076458 | took 0ms | statement | connection 90| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) )
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) );
2025-12-19T22:44:36.466+02:00  INFO 1050170 --- [library-api] [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-19T22:44:36.467+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-19T22:44:36.471+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-19T22:44:36.504+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-19T22:44:36.505+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076505 | took 0ms | statement | connection 92| url jdbc:h2:mem:library
select * from INFORMATION_SCHEMA.SEQUENCES
select * from INFORMATION_SCHEMA.SEQUENCES;
2025-12-19T22:44:36.506+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076506 | took 0ms | statement | connection 92| url jdbc:h2:mem:library
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0;
2025-12-19T22:44:36.506+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:36.646+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 43719 (http) with context path '/'
2025-12-19T22:44:36.648+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Started ApiIntegrationTest in 0.361 seconds (process running for 8.158)
2025-12-19T22:44:36.651+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076651 | took 0ms | statement | connection 93| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:36.653+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076653 | took 0ms | commit | connection 93| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.654+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076654 | took 0ms | statement | connection 94| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m2';
2025-12-19T22:44:36.654+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076654 | took 0ms | commit | connection 94| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.655+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076655 | took 0ms | statement | connection 95| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m3';
2025-12-19T22:44:36.655+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076655 | took 0ms | commit | connection 95| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.656+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076656 | took 0ms | statement | connection 96| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m4';
2025-12-19T22:44:36.656+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076656 | took 0ms | commit | connection 96| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.658+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076658 | took 0ms | statement | connection 97| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b1';
2025-12-19T22:44:36.658+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076658 | took 0ms | statement | connection 97| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:36.658+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076658 | took 0ms | commit | connection 97| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.659+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076659 | took 0ms | statement | connection 98| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b2';
2025-12-19T22:44:36.660+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076660 | took 0ms | statement | connection 98| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:36.660+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076660 | took 0ms | commit | connection 98| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.661+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076661 | took 0ms | statement | connection 99| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b3';
2025-12-19T22:44:36.661+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076661 | took 0ms | statement | connection 99| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:36.662+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076662 | took 0ms | statement | connection 99| url jdbc:h2:mem:library
update books set due_date=?,loaned_to=?,title=? where id=?
update books set due_date=NULL,loaned_to=NULL,title='Refactoring' where id='b3';
2025-12-19T22:44:36.662+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076662 | took 0ms | commit | connection 99| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.663+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076663 | took 0ms | statement | connection 100| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b4';
2025-12-19T22:44:36.664+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076664 | took 0ms | statement | connection 100| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:36.664+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076664 | took 0ms | commit | connection 100| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.664+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076664 | took 0ms | statement | connection 101| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b5';
2025-12-19T22:44:36.665+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076665 | took 0ms | statement | connection 101| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:36.665+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076665 | took 0ms | commit | connection 101| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.666+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076666 | took 0ms | statement | connection 102| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b6';
2025-12-19T22:44:36.666+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076666 | took 0ms | statement | connection 102| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:36.666+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076666 | took 0ms | commit | connection 102| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.672+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-19T22:44:36.672+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-19T22:44:36.673+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-12-19T22:44:36.679+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-1] p6spy                                    : #1766177076679 | took 0ms | statement | connection 103| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b2';
2025-12-19T22:44:36.680+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-1] p6spy                                    : #1766177076680 | took 0ms | commit | connection 103| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.682+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-1] p6spy                                    : #1766177076682 | took 0ms | statement | connection 103| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:36.682+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-1] p6spy                                    : #1766177076682 | took 0ms | commit | connection 103| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.683+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-1] p6spy                                    : #1766177076683 | took 0ms | statement | connection 103| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:36.683+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-1] p6spy                                    : #1766177076683 | took 0ms | commit | connection 103| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.685+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-1] p6spy                                    : #1766177076684 | took 0ms | statement | connection 103| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:36.685+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-1] p6spy                                    : #1766177076685 | took 0ms | commit | connection 103| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.686+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-1] p6spy                                    : #1766177076686 | took 0ms | statement | connection 103| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:36.688+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-1] p6spy                                    : #1766177076688 | took 0ms | statement | connection 103| url jdbc:h2:mem:library
update books set due_date=?,loaned_to=?,title=? where id=?
update books set due_date='2026-01-02T00:00:00.000+0200',loaned_to='m1',title='Domain-Driven Design' where id='b2';
2025-12-19T22:44:36.688+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-1] p6spy                                    : #1766177076688 | took 0ms | commit | connection 103| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.698+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-2] p6spy                                    : #1766177076698 | took 0ms | statement | connection 104| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b2';
2025-12-19T22:44:36.699+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-2] p6spy                                    : #1766177076699 | took 0ms | commit | connection 104| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.700+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-2] p6spy                                    : #1766177076700 | took 0ms | statement | connection 104| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m2';
2025-12-19T22:44:36.701+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-2] p6spy                                    : #1766177076701 | took 0ms | commit | connection 104| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.702+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-2] p6spy                                    : #1766177076702 | took 0ms | statement | connection 104| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:36.707+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-2] p6spy                                    : #1766177076707 | took 0ms | statement | connection 104| url jdbc:h2:mem:library
insert into book_reservations (book_id,position,member_id) values (?,?,?)
insert into book_reservations (book_id,position,member_id) values ('b2',0,'m2');
2025-12-19T22:44:36.708+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-2] p6spy                                    : #1766177076708 | took 0ms | commit | connection 104| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.716+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-3] p6spy                                    : #1766177076716 | took 0ms | statement | connection 105| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b2';
2025-12-19T22:44:36.717+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-3] p6spy                                    : #1766177076717 | took 0ms | commit | connection 105| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.718+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-3] p6spy                                    : #1766177076718 | took 0ms | statement | connection 105| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m2';
2025-12-19T22:44:36.718+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-3] p6spy                                    : #1766177076718 | took 0ms | commit | connection 105| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.719+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-3] p6spy                                    : #1766177076719 | took 0ms | statement | connection 105| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:36.721+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-3] p6spy                                    : #1766177076721 | took 0ms | statement | connection 105| url jdbc:h2:mem:library
delete from book_reservations where book_id=?
delete from book_reservations where book_id='b2';
2025-12-19T22:44:36.721+02:00  INFO 1050170 --- [library-api] [o-auto-6-exec-3] p6spy                                    : #1766177076721 | took 0ms | commit | connection 105| url jdbc:h2:mem:library

;
2025-12-19T22:44:36.725+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:36.726+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown initiated...
2025-12-19T22:44:36.732+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown completed.



888b    888                  888             888      888      8888888888        d8888 8888888b.        .d8888b.   .d8888b.   .d8888b.   .d8888b.   
8888b   888                  888             888      888      888              d88888 888   Y88b      d88P  Y88b d88P  Y88b d88P  Y88b d88P  Y88b  
88888b  888                  888             888      888      888             d88P888 888    888             888 888    888        888 888         
888Y88b 888  .d88b.  888d888 888888  8888b.  888      888      8888888        d88P 888 888   d88P           .d88P 888    888      .d88P 888d888b.   
888 Y88b888 d88""88b 888P"   888        "88b 888      888      888           d88P  888 8888888P"        .od888P"  888    888  .od888P"  888P "Y88b  
888  Y88888 888  888 888     888    .d888888 888      888      888          d88P   888 888             d88P"      888    888 d88P"      888    888  
888   Y8888 Y88..88P 888     Y88b.  888  888 888      888      888         d8888888888 888             888"       Y88b  d88P 888"       Y88b  d88P  
888    Y888  "Y88P"  888      "Y888 "Y888888 888      88888888 8888888888 d88P     888 888             888888888   "Y8888P"  888888888   "Y8888P"   
                                                                                                                                                    
                                                                                                                                                    
                                                                                                                                                    
 .d8888b.                888 d8b                               d8888                   d8b                                                   888    
d88P  Y88b               888 Y8P                              d88888                   Y8P                                                   888    
888    888               888                                 d88P888                                                                         888    
888         .d88b.   .d88888 888 88888b.   .d88b.           d88P 888 .d8888b  .d8888b  888  .d88b.  88888b.  88888b.d88b.   .d88b.  88888b.  888888 
888        d88""88b d88" 888 888 888 "88b d88P"88b         d88P  888 88K      88K      888 d88P"88b 888 "88b 888 "888 "88b d8P  Y8b 888 "88b 888    
888    888 888  888 888  888 888 888  888 888  888        d88P   888 "Y8888b. "Y8888b. 888 888  888 888  888 888  888  888 88888888 888  888 888    
Y88b  d88P Y88..88P Y88b 888 888 888  888 Y88b 888       d8888888888      X88      X88 888 Y88b 888 888  888 888  888  888 Y8b.     888  888 Y88b.  
 "Y8888P"   "Y88P"   "Y88888 888 888  888  "Y88888      d88P     888  88888P'  88888P' 888  "Y88888 888  888 888  888  888  "Y8888  888  888  "Y888 
                                               888                                              888                                                 
                                          Y8b d88P                                         Y8b d88P                                                 
                                           "Y88P"                                           "Y88P"                                                                                                 

H2 console: http://localhost:0/h2-console
API:        http://localhost:0/api

2025-12-19T22:44:36.747+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Starting ApiIntegrationTest using Java 21.0.9 with PID 1050170 (started by kooduser in /home/kooduser/Documents/Nortal Test Task/nortal-leap-2026-test-assignment/backend/api)
2025-12-19T22:44:36.747+02:00 DEBUG 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-12-19T22:44:36.747+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : No active profile set, falling back to 1 default profile: "default"
2025-12-19T22:44:36.827+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-19T22:44:36.830+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 2 JPA repository interfaces.
2025-12-19T22:44:36.886+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2025-12-19T22:44:36.887+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-19T22:44:36.887+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-12-19T22:44:36.893+02:00  INFO 1050170 --- [library-api] [    Test worker] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-19T22:44:36.893+02:00  INFO 1050170 --- [library-api] [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 145 ms
2025-12-19T22:44:36.903+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Starting...
2025-12-19T22:44:36.905+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-7 - Added connection conn49: url=jdbc:h2:mem:library user=SA
2025-12-19T22:44:36.905+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Start completed.
2025-12-19T22:44:36.905+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:library'
2025-12-19T22:44:36.915+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076915 | took 0ms | statement | connection 107| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL )
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL );
2025-12-19T22:44:36.916+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076916 | took 0ms | statement | connection 107| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE )
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE );
2025-12-19T22:44:36.916+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076916 | took 0ms | statement | connection 107| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) )
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) );
2025-12-19T22:44:36.922+02:00  INFO 1050170 --- [library-api] [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-19T22:44:36.923+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-19T22:44:36.926+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-19T22:44:36.956+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-19T22:44:36.956+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076956 | took 0ms | statement | connection 109| url jdbc:h2:mem:library
select * from INFORMATION_SCHEMA.SEQUENCES
select * from INFORMATION_SCHEMA.SEQUENCES;
2025-12-19T22:44:36.957+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177076957 | took 0ms | statement | connection 109| url jdbc:h2:mem:library
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0;
2025-12-19T22:44:36.958+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:37.065+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 38613 (http) with context path '/'
2025-12-19T22:44:37.067+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Started ApiIntegrationTest in 0.331 seconds (process running for 8.577)
2025-12-19T22:44:37.070+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077070 | took 0ms | statement | connection 110| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:37.071+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077071 | took 0ms | commit | connection 110| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.072+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077072 | took 0ms | statement | connection 111| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m2';
2025-12-19T22:44:37.072+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077072 | took 0ms | commit | connection 111| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.073+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077073 | took 0ms | statement | connection 112| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m3';
2025-12-19T22:44:37.073+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077073 | took 0ms | commit | connection 112| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.074+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077074 | took 0ms | statement | connection 113| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m4';
2025-12-19T22:44:37.074+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077074 | took 0ms | commit | connection 113| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.075+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077075 | took 0ms | statement | connection 114| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b1';
2025-12-19T22:44:37.076+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077076 | took 0ms | statement | connection 114| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:37.076+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077076 | took 0ms | commit | connection 114| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.077+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077077 | took 0ms | statement | connection 115| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b2';
2025-12-19T22:44:37.078+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077078 | took 0ms | statement | connection 115| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:37.079+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077079 | took 0ms | statement | connection 115| url jdbc:h2:mem:library
update books set due_date=?,loaned_to=?,title=? where id=?
update books set due_date=NULL,loaned_to=NULL,title='Domain-Driven Design' where id='b2';
2025-12-19T22:44:37.079+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077079 | took 0ms | commit | connection 115| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.080+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077080 | took 0ms | statement | connection 116| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b3';
2025-12-19T22:44:37.081+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077081 | took 0ms | statement | connection 116| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:37.081+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077081 | took 0ms | commit | connection 116| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.082+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077082 | took 0ms | statement | connection 117| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b4';
2025-12-19T22:44:37.083+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077083 | took 0ms | statement | connection 117| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:37.083+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077083 | took 0ms | commit | connection 117| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.084+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077084 | took 0ms | statement | connection 118| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b5';
2025-12-19T22:44:37.084+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077084 | took 0ms | statement | connection 118| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:37.085+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077085 | took 0ms | commit | connection 118| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.085+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077085 | took 0ms | statement | connection 119| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b6';
2025-12-19T22:44:37.086+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077086 | took 0ms | statement | connection 119| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:37.086+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077086 | took 0ms | commit | connection 119| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.093+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-19T22:44:37.093+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-19T22:44:37.094+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-12-19T22:44:37.100+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-1] p6spy                                    : #1766177077100 | took 0ms | statement | connection 120| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='vb-search';
2025-12-19T22:44:37.101+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-1] p6spy                                    : #1766177077101 | took 0ms | statement | connection 120| url jdbc:h2:mem:library
insert into books (due_date,loaned_to,title,id) values (?,?,?,?)
insert into books (due_date,loaned_to,title,id) values (NULL,NULL,'Algorithms 101','vb-search');
2025-12-19T22:44:37.101+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-1] p6spy                                    : #1766177077101 | took 0ms | commit | connection 120| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.115+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-2] p6spy                                    : #1766177077115 | took 0ms | statement | connection 121| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:37.116+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-2] p6spy                                    : #1766177077116 | took 0ms | commit | connection 121| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.121+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-2] p6spy                                    : #1766177077121 | took 0ms | statement | connection 121| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='vb-search';
2025-12-19T22:44:37.133+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-3] p6spy                                    : #1766177077133 | took 0ms | statement | connection 122| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='vb-search';
2025-12-19T22:44:37.133+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-3] p6spy                                    : #1766177077133 | took 0ms | commit | connection 122| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.137+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-3] p6spy                                    : #1766177077137 | took 0ms | statement | connection 122| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:37.137+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-3] p6spy                                    : #1766177077137 | took 0ms | commit | connection 122| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.138+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-3] p6spy                                    : #1766177077138 | took 0ms | statement | connection 122| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:37.138+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-3] p6spy                                    : #1766177077138 | took 0ms | commit | connection 122| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.140+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-3] p6spy                                    : #1766177077140 | took 0ms | statement | connection 122| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:37.141+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-3] p6spy                                    : #1766177077141 | took 0ms | commit | connection 122| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.142+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-3] p6spy                                    : #1766177077142 | took 0ms | statement | connection 122| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='vb-search';
2025-12-19T22:44:37.144+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-3] p6spy                                    : #1766177077144 | took 0ms | statement | connection 122| url jdbc:h2:mem:library
update books set due_date=?,loaned_to=?,title=? where id=?
update books set due_date='2026-01-02T00:00:00.000+0200',loaned_to='m1',title='Algorithms 101' where id='vb-search';
2025-12-19T22:44:37.145+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-3] p6spy                                    : #1766177077145 | took 0ms | commit | connection 122| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.149+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-4] p6spy                                    : #1766177077149 | took 0ms | statement | connection 123| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:37.150+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-4] p6spy                                    : #1766177077150 | took 0ms | commit | connection 123| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.151+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-4] p6spy                                    : #1766177077151 | took 0ms | statement | connection 123| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:37.151+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-4] p6spy                                    : #1766177077151 | took 0ms | statement | connection 123| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:37.151+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-4] p6spy                                    : #1766177077151 | took 0ms | statement | connection 123| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:37.151+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-4] p6spy                                    : #1766177077151 | took 0ms | statement | connection 123| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:37.152+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-4] p6spy                                    : #1766177077152 | took 0ms | statement | connection 123| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:37.152+02:00  INFO 1050170 --- [library-api] [o-auto-7-exec-4] p6spy                                    : #1766177077152 | took 0ms | statement | connection 123| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:37.156+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:37.156+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown initiated...
2025-12-19T22:44:37.161+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown completed.



888b    888                  888             888      888      8888888888        d8888 8888888b.        .d8888b.   .d8888b.   .d8888b.   .d8888b.   
8888b   888                  888             888      888      888              d88888 888   Y88b      d88P  Y88b d88P  Y88b d88P  Y88b d88P  Y88b  
88888b  888                  888             888      888      888             d88P888 888    888             888 888    888        888 888         
888Y88b 888  .d88b.  888d888 888888  8888b.  888      888      8888888        d88P 888 888   d88P           .d88P 888    888      .d88P 888d888b.   
888 Y88b888 d88""88b 888P"   888        "88b 888      888      888           d88P  888 8888888P"        .od888P"  888    888  .od888P"  888P "Y88b  
888  Y88888 888  888 888     888    .d888888 888      888      888          d88P   888 888             d88P"      888    888 d88P"      888    888  
888   Y8888 Y88..88P 888     Y88b.  888  888 888      888      888         d8888888888 888             888"       Y88b  d88P 888"       Y88b  d88P  
888    Y888  "Y88P"  888      "Y888 "Y888888 888      88888888 8888888888 d88P     888 888             888888888   "Y8888P"  888888888   "Y8888P"   
                                                                                                                                                    
                                                                                                                                                    
                                                                                                                                                    
 .d8888b.                888 d8b                               d8888                   d8b                                                   888    
d88P  Y88b               888 Y8P                              d88888                   Y8P                                                   888    
888    888               888                                 d88P888                                                                         888    
888         .d88b.   .d88888 888 88888b.   .d88b.           d88P 888 .d8888b  .d8888b  888  .d88b.  88888b.  88888b.d88b.   .d88b.  88888b.  888888 
888        d88""88b d88" 888 888 888 "88b d88P"88b         d88P  888 88K      88K      888 d88P"88b 888 "88b 888 "888 "88b d8P  Y8b 888 "88b 888    
888    888 888  888 888  888 888 888  888 888  888        d88P   888 "Y8888b. "Y8888b. 888 888  888 888  888 888  888  888 88888888 888  888 888    
Y88b  d88P Y88..88P Y88b 888 888 888  888 Y88b 888       d8888888888      X88      X88 888 Y88b 888 888  888 888  888  888 Y8b.     888  888 Y88b.  
 "Y8888P"   "Y88P"   "Y88888 888 888  888  "Y88888      d88P     888  88888P'  88888P' 888  "Y88888 888  888 888  888  888  "Y8888  888  888  "Y888 
                                               888                                              888                                                 
                                          Y8b d88P                                         Y8b d88P                                                 
                                           "Y88P"                                           "Y88P"                                                                                                 

H2 console: http://localhost:0/h2-console
API:        http://localhost:0/api

2025-12-19T22:44:37.181+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Starting ApiIntegrationTest using Java 21.0.9 with PID 1050170 (started by kooduser in /home/kooduser/Documents/Nortal Test Task/nortal-leap-2026-test-assignment/backend/api)
2025-12-19T22:44:37.181+02:00 DEBUG 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-12-19T22:44:37.181+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : No active profile set, falling back to 1 default profile: "default"
2025-12-19T22:44:37.246+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-19T22:44:37.249+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 2 JPA repository interfaces.
2025-12-19T22:44:37.342+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2025-12-19T22:44:37.343+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-19T22:44:37.343+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-12-19T22:44:37.350+02:00  INFO 1050170 --- [library-api] [    Test worker] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-19T22:44:37.350+02:00  INFO 1050170 --- [library-api] [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 168 ms
2025-12-19T22:44:37.380+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Starting...
2025-12-19T22:44:37.382+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-8 - Added connection conn55: url=jdbc:h2:mem:library user=SA
2025-12-19T22:44:37.382+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Start completed.
2025-12-19T22:44:37.382+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:library'
2025-12-19T22:44:37.394+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077394 | took 0ms | statement | connection 125| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL )
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL );
2025-12-19T22:44:37.394+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077394 | took 0ms | statement | connection 125| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE )
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE );
2025-12-19T22:44:37.395+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077395 | took 0ms | statement | connection 125| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) )
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) );
2025-12-19T22:44:37.402+02:00  INFO 1050170 --- [library-api] [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-19T22:44:37.403+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-19T22:44:37.406+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-19T22:44:37.440+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-19T22:44:37.441+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077441 | took 0ms | statement | connection 127| url jdbc:h2:mem:library
select * from INFORMATION_SCHEMA.SEQUENCES
select * from INFORMATION_SCHEMA.SEQUENCES;
2025-12-19T22:44:37.442+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077442 | took 0ms | statement | connection 127| url jdbc:h2:mem:library
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0;
2025-12-19T22:44:37.442+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:37.545+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 34347 (http) with context path '/'
2025-12-19T22:44:37.546+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Started ApiIntegrationTest in 0.381 seconds (process running for 9.056)
2025-12-19T22:44:37.551+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077551 | took 0ms | statement | connection 128| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:37.552+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077552 | took 0ms | commit | connection 128| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.553+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077553 | took 0ms | statement | connection 129| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m2';
2025-12-19T22:44:37.554+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077554 | took 0ms | commit | connection 129| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.554+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077554 | took 0ms | statement | connection 130| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m3';
2025-12-19T22:44:37.555+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077555 | took 0ms | commit | connection 130| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.555+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077555 | took 0ms | statement | connection 131| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m4';
2025-12-19T22:44:37.556+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077556 | took 0ms | commit | connection 131| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.557+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077557 | took 0ms | statement | connection 132| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b1';
2025-12-19T22:44:37.559+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077559 | took 0ms | statement | connection 132| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:37.559+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077559 | took 0ms | commit | connection 132| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.560+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077560 | took 0ms | statement | connection 133| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b2';
2025-12-19T22:44:37.561+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077561 | took 0ms | statement | connection 133| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:37.562+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077562 | took 0ms | commit | connection 133| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.563+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077563 | took 0ms | statement | connection 134| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b3';
2025-12-19T22:44:37.565+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077565 | took 0ms | statement | connection 134| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:37.565+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077565 | took 0ms | commit | connection 134| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.567+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077567 | took 0ms | statement | connection 135| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b4';
2025-12-19T22:44:37.569+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077569 | took 0ms | statement | connection 135| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:37.569+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077569 | took 0ms | commit | connection 135| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.570+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077570 | took 0ms | statement | connection 136| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b5';
2025-12-19T22:44:37.571+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077571 | took 0ms | statement | connection 136| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:37.571+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077571 | took 0ms | commit | connection 136| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.572+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077572 | took 0ms | statement | connection 137| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b6';
2025-12-19T22:44:37.573+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077573 | took 0ms | statement | connection 137| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:37.573+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077573 | took 0ms | commit | connection 137| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.580+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-19T22:44:37.580+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-19T22:44:37.581+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-12-19T22:44:37.590+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-1] p6spy                                    : #1766177077590 | took 0ms | statement | connection 138| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b4';
2025-12-19T22:44:37.591+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-1] p6spy                                    : #1766177077591 | took 0ms | commit | connection 138| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.593+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-1] p6spy                                    : #1766177077593 | took 0ms | statement | connection 138| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m2';
2025-12-19T22:44:37.594+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-1] p6spy                                    : #1766177077594 | took 0ms | commit | connection 138| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.594+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-1] p6spy                                    : #1766177077594 | took 0ms | statement | connection 138| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m2';
2025-12-19T22:44:37.595+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-1] p6spy                                    : #1766177077595 | took 0ms | commit | connection 138| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.600+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-1] p6spy                                    : #1766177077600 | took 0ms | statement | connection 138| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:37.601+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-1] p6spy                                    : #1766177077601 | took 0ms | commit | connection 138| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.601+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-1] p6spy                                    : #1766177077601 | took 0ms | statement | connection 138| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:37.604+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-1] p6spy                                    : #1766177077604 | took 0ms | statement | connection 138| url jdbc:h2:mem:library
update books set due_date=?,loaned_to=?,title=? where id=?
update books set due_date='2026-01-02T00:00:00.000+0200',loaned_to='m2',title='Effective Java' where id='b4';
2025-12-19T22:44:37.604+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-1] p6spy                                    : #1766177077604 | took 0ms | commit | connection 138| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.612+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-2] p6spy                                    : #1766177077612 | took 0ms | statement | connection 139| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b5';
2025-12-19T22:44:37.613+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-2] p6spy                                    : #1766177077613 | took 0ms | commit | connection 139| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.615+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-2] p6spy                                    : #1766177077615 | took 0ms | statement | connection 139| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:37.616+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-2] p6spy                                    : #1766177077616 | took 0ms | commit | connection 139| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.617+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-2] p6spy                                    : #1766177077617 | took 0ms | statement | connection 139| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:37.617+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-2] p6spy                                    : #1766177077617 | took 0ms | commit | connection 139| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.619+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-2] p6spy                                    : #1766177077619 | took 0ms | statement | connection 139| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:37.620+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-2] p6spy                                    : #1766177077620 | took 0ms | commit | connection 139| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.621+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-2] p6spy                                    : #1766177077621 | took 0ms | statement | connection 139| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:37.622+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-2] p6spy                                    : #1766177077622 | took 0ms | statement | connection 139| url jdbc:h2:mem:library
update books set due_date=?,loaned_to=?,title=? where id=?
update books set due_date='2026-01-02T00:00:00.000+0200',loaned_to='m1',title='Design Patterns' where id='b5';
2025-12-19T22:44:37.623+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-2] p6spy                                    : #1766177077623 | took 0ms | commit | connection 139| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.632+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-3] p6spy                                    : #1766177077632 | took 0ms | statement | connection 140| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b5';
2025-12-19T22:44:37.634+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-3] p6spy                                    : #1766177077634 | took 0ms | commit | connection 140| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.635+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-3] p6spy                                    : #1766177077635 | took 0ms | statement | connection 140| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m2';
2025-12-19T22:44:37.635+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-3] p6spy                                    : #1766177077635 | took 0ms | commit | connection 140| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.636+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-3] p6spy                                    : #1766177077636 | took 0ms | statement | connection 140| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:37.637+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-3] p6spy                                    : #1766177077637 | took 0ms | statement | connection 140| url jdbc:h2:mem:library
insert into book_reservations (book_id,position,member_id) values (?,?,?)
insert into book_reservations (book_id,position,member_id) values ('b5',0,'m2');
2025-12-19T22:44:37.637+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-3] p6spy                                    : #1766177077637 | took 0ms | commit | connection 140| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.648+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-4] p6spy                                    : #1766177077648 | took 0ms | statement | connection 141| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m2';
2025-12-19T22:44:37.648+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-4] p6spy                                    : #1766177077648 | took 0ms | commit | connection 141| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.650+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-4] p6spy                                    : #1766177077650 | took 0ms | statement | connection 141| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:37.651+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-4] p6spy                                    : #1766177077651 | took 0ms | commit | connection 141| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.652+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-4] p6spy                                    : #1766177077652 | took 0ms | statement | connection 141| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:37.652+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-4] p6spy                                    : #1766177077652 | took 0ms | statement | connection 141| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:37.652+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-4] p6spy                                    : #1766177077652 | took 0ms | statement | connection 141| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:37.652+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-4] p6spy                                    : #1766177077652 | took 0ms | statement | connection 141| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:37.653+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-4] p6spy                                    : #1766177077653 | took 0ms | statement | connection 141| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:37.653+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-4] p6spy                                    : #1766177077653 | took 0ms | statement | connection 141| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:37.653+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-4] p6spy                                    : #1766177077653 | took 0ms | statement | connection 141| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='vb-search';
2025-12-19T22:44:37.655+02:00  INFO 1050170 --- [library-api] [o-auto-8-exec-4] p6spy                                    : #1766177077655 | took 0ms | commit | connection 141| url jdbc:h2:mem:library

;
2025-12-19T22:44:37.662+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:37.662+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown initiated...
2025-12-19T22:44:37.668+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown completed.



888b    888                  888             888      888      8888888888        d8888 8888888b.        .d8888b.   .d8888b.   .d8888b.   .d8888b.   
8888b   888                  888             888      888      888              d88888 888   Y88b      d88P  Y88b d88P  Y88b d88P  Y88b d88P  Y88b  
88888b  888                  888             888      888      888             d88P888 888    888             888 888    888        888 888         
888Y88b 888  .d88b.  888d888 888888  8888b.  888      888      8888888        d88P 888 888   d88P           .d88P 888    888      .d88P 888d888b.   
888 Y88b888 d88""88b 888P"   888        "88b 888      888      888           d88P  888 8888888P"        .od888P"  888    888  .od888P"  888P "Y88b  
888  Y88888 888  888 888     888    .d888888 888      888      888          d88P   888 888             d88P"      888    888 d88P"      888    888  
888   Y8888 Y88..88P 888     Y88b.  888  888 888      888      888         d8888888888 888             888"       Y88b  d88P 888"       Y88b  d88P  
888    Y888  "Y88P"  888      "Y888 "Y888888 888      88888888 8888888888 d88P     888 888             888888888   "Y8888P"  888888888   "Y8888P"   
                                                                                                                                                    
                                                                                                                                                    
                                                                                                                                                    
 .d8888b.                888 d8b                               d8888                   d8b                                                   888    
d88P  Y88b               888 Y8P                              d88888                   Y8P                                                   888    
888    888               888                                 d88P888                                                                         888    
888         .d88b.   .d88888 888 88888b.   .d88b.           d88P 888 .d8888b  .d8888b  888  .d88b.  88888b.  88888b.d88b.   .d88b.  88888b.  888888 
888        d88""88b d88" 888 888 888 "88b d88P"88b         d88P  888 88K      88K      888 d88P"88b 888 "88b 888 "888 "88b d8P  Y8b 888 "88b 888    
888    888 888  888 888  888 888 888  888 888  888        d88P   888 "Y8888b. "Y8888b. 888 888  888 888  888 888  888  888 88888888 888  888 888    
Y88b  d88P Y88..88P Y88b 888 888 888  888 Y88b 888       d8888888888      X88      X88 888 Y88b 888 888  888 888  888  888 Y8b.     888  888 Y88b.  
 "Y8888P"   "Y88P"   "Y88888 888 888  888  "Y88888      d88P     888  88888P'  88888P' 888  "Y88888 888  888 888  888  888  "Y8888  888  888  "Y888 
                                               888                                              888                                                 
                                          Y8b d88P                                         Y8b d88P                                                 
                                           "Y88P"                                           "Y88P"                                                                                                 

H2 console: http://localhost:0/h2-console
API:        http://localhost:0/api

2025-12-19T22:44:37.687+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Starting ApiIntegrationTest using Java 21.0.9 with PID 1050170 (started by kooduser in /home/kooduser/Documents/Nortal Test Task/nortal-leap-2026-test-assignment/backend/api)
2025-12-19T22:44:37.687+02:00 DEBUG 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-12-19T22:44:37.687+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : No active profile set, falling back to 1 default profile: "default"
2025-12-19T22:44:37.748+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-19T22:44:37.751+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 2 JPA repository interfaces.
2025-12-19T22:44:37.828+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2025-12-19T22:44:37.829+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-19T22:44:37.829+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-12-19T22:44:37.835+02:00  INFO 1050170 --- [library-api] [    Test worker] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-19T22:44:37.836+02:00  INFO 1050170 --- [library-api] [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 148 ms
2025-12-19T22:44:37.848+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Starting...
2025-12-19T22:44:37.850+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-9 - Added connection conn62: url=jdbc:h2:mem:library user=SA
2025-12-19T22:44:37.850+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Start completed.
2025-12-19T22:44:37.850+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:library'
2025-12-19T22:44:37.869+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077869 | took 3ms | statement | connection 143| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL )
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL );
2025-12-19T22:44:37.869+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077869 | took 0ms | statement | connection 143| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE )
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE );
2025-12-19T22:44:37.869+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077869 | took 0ms | statement | connection 143| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) )
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) );
2025-12-19T22:44:37.876+02:00  INFO 1050170 --- [library-api] [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-19T22:44:37.877+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-19T22:44:37.880+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-19T22:44:37.916+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-19T22:44:37.917+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077917 | took 0ms | statement | connection 145| url jdbc:h2:mem:library
select * from INFORMATION_SCHEMA.SEQUENCES
select * from INFORMATION_SCHEMA.SEQUENCES;
2025-12-19T22:44:37.918+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177077918 | took 0ms | statement | connection 145| url jdbc:h2:mem:library
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0;
2025-12-19T22:44:37.919+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:38.045+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 43041 (http) with context path '/'
2025-12-19T22:44:38.047+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Started ApiIntegrationTest in 0.375 seconds (process running for 9.556)
2025-12-19T22:44:38.050+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078050 | took 0ms | statement | connection 146| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:38.051+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078051 | took 0ms | commit | connection 146| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.052+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078052 | took 0ms | statement | connection 147| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m2';
2025-12-19T22:44:38.052+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078052 | took 0ms | commit | connection 147| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.053+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078053 | took 0ms | statement | connection 148| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m3';
2025-12-19T22:44:38.053+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078053 | took 0ms | commit | connection 148| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.054+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078054 | took 0ms | statement | connection 149| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m4';
2025-12-19T22:44:38.054+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078054 | took 0ms | commit | connection 149| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.055+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078055 | took 0ms | statement | connection 150| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b1';
2025-12-19T22:44:38.056+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078056 | took 0ms | statement | connection 150| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:38.056+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078056 | took 0ms | commit | connection 150| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.057+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078057 | took 0ms | statement | connection 151| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b2';
2025-12-19T22:44:38.057+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078057 | took 0ms | statement | connection 151| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:38.058+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078058 | took 0ms | commit | connection 151| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.058+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078058 | took 0ms | statement | connection 152| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b3';
2025-12-19T22:44:38.059+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078059 | took 0ms | statement | connection 152| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:38.059+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078059 | took 0ms | commit | connection 152| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.059+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078059 | took 0ms | statement | connection 153| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b4';
2025-12-19T22:44:38.060+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078060 | took 0ms | statement | connection 153| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:38.060+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078060 | took 0ms | statement | connection 153| url jdbc:h2:mem:library
update books set due_date=?,loaned_to=?,title=? where id=?
update books set due_date=NULL,loaned_to=NULL,title='Effective Java' where id='b4';
2025-12-19T22:44:38.061+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078061 | took 0ms | commit | connection 153| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.061+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078061 | took 0ms | statement | connection 154| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b5';
2025-12-19T22:44:38.061+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078061 | took 0ms | statement | connection 154| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:38.062+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078062 | took 0ms | statement | connection 154| url jdbc:h2:mem:library
update books set due_date=?,loaned_to=?,title=? where id=?
update books set due_date=NULL,loaned_to=NULL,title='Design Patterns' where id='b5';
2025-12-19T22:44:38.062+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078062 | took 0ms | statement | connection 154| url jdbc:h2:mem:library
delete from book_reservations where book_id=?
delete from book_reservations where book_id='b5';
2025-12-19T22:44:38.063+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078063 | took 0ms | commit | connection 154| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.063+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078063 | took 0ms | statement | connection 155| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b6';
2025-12-19T22:44:38.063+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078063 | took 0ms | statement | connection 155| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:38.064+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078064 | took 0ms | commit | connection 155| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.069+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-19T22:44:38.069+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-19T22:44:38.069+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-12-19T22:44:38.078+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-1] p6spy                                    : #1766177078078 | took 0ms | statement | connection 156| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b6';
2025-12-19T22:44:38.079+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-1] p6spy                                    : #1766177078079 | took 0ms | commit | connection 156| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.081+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-1] p6spy                                    : #1766177078081 | took 0ms | statement | connection 156| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:38.081+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-1] p6spy                                    : #1766177078081 | took 0ms | commit | connection 156| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.081+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-1] p6spy                                    : #1766177078081 | took 0ms | statement | connection 156| url jdbc:h2:mem:library
select count(*) from members m1_0 where m1_0.id=?
select count(*) from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:38.082+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-1] p6spy                                    : #1766177078082 | took 0ms | commit | connection 156| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.083+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-1] p6spy                                    : #1766177078083 | took 0ms | statement | connection 156| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:38.083+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-1] p6spy                                    : #1766177078083 | took 0ms | commit | connection 156| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.084+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-1] p6spy                                    : #1766177078084 | took 0ms | statement | connection 156| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:38.085+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-1] p6spy                                    : #1766177078085 | took 0ms | statement | connection 156| url jdbc:h2:mem:library
update books set due_date=?,loaned_to=?,title=? where id=?
update books set due_date='2026-01-02T00:00:00.000+0200',loaned_to='m1',title='The Pragmatic Programmer' where id='b6';
2025-12-19T22:44:38.085+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-1] p6spy                                    : #1766177078085 | took 0ms | commit | connection 156| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.093+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-2] p6spy                                    : #1766177078093 | took 0ms | statement | connection 157| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b6';
2025-12-19T22:44:38.093+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-2] p6spy                                    : #1766177078093 | took 0ms | commit | connection 157| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.094+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-2] p6spy                                    : #1766177078094 | took 0ms | statement | connection 157| url jdbc:h2:mem:library
update books set due_date=?,loaned_to=?,title=? where id=?
update books set due_date='2025-12-03T00:00:00.000+0200',loaned_to='m1',title='The Pragmatic Programmer' where id='b6';
2025-12-19T22:44:38.094+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-2] p6spy                                    : #1766177078094 | took 0ms | commit | connection 157| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.099+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-3] p6spy                                    : #1766177078099 | took 0ms | statement | connection 158| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0;
2025-12-19T22:44:38.100+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-3] p6spy                                    : #1766177078100 | took 0ms | commit | connection 158| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.103+02:00  INFO 1050170 --- [library-api] [o-auto-9-exec-3] p6spy                                    : #1766177078103 | took 0ms | statement | connection 158| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:38.106+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:38.107+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown initiated...
2025-12-19T22:44:38.137+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown completed.



888b    888                  888             888      888      8888888888        d8888 8888888b.        .d8888b.   .d8888b.   .d8888b.   .d8888b.   
8888b   888                  888             888      888      888              d88888 888   Y88b      d88P  Y88b d88P  Y88b d88P  Y88b d88P  Y88b  
88888b  888                  888             888      888      888             d88P888 888    888             888 888    888        888 888         
888Y88b 888  .d88b.  888d888 888888  8888b.  888      888      8888888        d88P 888 888   d88P           .d88P 888    888      .d88P 888d888b.   
888 Y88b888 d88""88b 888P"   888        "88b 888      888      888           d88P  888 8888888P"        .od888P"  888    888  .od888P"  888P "Y88b  
888  Y88888 888  888 888     888    .d888888 888      888      888          d88P   888 888             d88P"      888    888 d88P"      888    888  
888   Y8888 Y88..88P 888     Y88b.  888  888 888      888      888         d8888888888 888             888"       Y88b  d88P 888"       Y88b  d88P  
888    Y888  "Y88P"  888      "Y888 "Y888888 888      88888888 8888888888 d88P     888 888             888888888   "Y8888P"  888888888   "Y8888P"   
                                                                                                                                                    
                                                                                                                                                    
                                                                                                                                                    
 .d8888b.                888 d8b                               d8888                   d8b                                                   888    
d88P  Y88b               888 Y8P                              d88888                   Y8P                                                   888    
888    888               888                                 d88P888                                                                         888    
888         .d88b.   .d88888 888 88888b.   .d88b.           d88P 888 .d8888b  .d8888b  888  .d88b.  88888b.  88888b.d88b.   .d88b.  88888b.  888888 
888        d88""88b d88" 888 888 888 "88b d88P"88b         d88P  888 88K      88K      888 d88P"88b 888 "88b 888 "888 "88b d8P  Y8b 888 "88b 888    
888    888 888  888 888  888 888 888  888 888  888        d88P   888 "Y8888b. "Y8888b. 888 888  888 888  888 888  888  888 88888888 888  888 888    
Y88b  d88P Y88..88P Y88b 888 888 888  888 Y88b 888       d8888888888      X88      X88 888 Y88b 888 888  888 888  888  888 Y8b.     888  888 Y88b.  
 "Y8888P"   "Y88P"   "Y88888 888 888  888  "Y88888      d88P     888  88888P'  88888P' 888  "Y88888 888  888 888  888  888  "Y8888  888  888  "Y888 
                                               888                                              888                                                 
                                          Y8b d88P                                         Y8b d88P                                                 
                                           "Y88P"                                           "Y88P"                                                                                                 

H2 console: http://localhost:0/h2-console
API:        http://localhost:0/api

2025-12-19T22:44:38.154+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Starting ApiIntegrationTest using Java 21.0.9 with PID 1050170 (started by kooduser in /home/kooduser/Documents/Nortal Test Task/nortal-leap-2026-test-assignment/backend/api)
2025-12-19T22:44:38.154+02:00 DEBUG 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-12-19T22:44:38.154+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : No active profile set, falling back to 1 default profile: "default"
2025-12-19T22:44:38.194+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-19T22:44:38.196+02:00  INFO 1050170 --- [library-api] [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 1 ms. Found 2 JPA repository interfaces.
2025-12-19T22:44:38.259+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 0 (http)
2025-12-19T22:44:38.260+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-19T22:44:38.260+02:00  INFO 1050170 --- [library-api] [    Test worker] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-12-19T22:44:38.269+02:00  INFO 1050170 --- [library-api] [    Test worker] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-19T22:44:38.269+02:00  INFO 1050170 --- [library-api] [    Test worker] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 114 ms
2025-12-19T22:44:38.286+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Starting...
2025-12-19T22:44:38.293+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-10 - Added connection conn69: url=jdbc:h2:mem:library user=SA
2025-12-19T22:44:38.299+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Start completed.
2025-12-19T22:44:38.299+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:library'
2025-12-19T22:44:38.332+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078332 | took 0ms | statement | connection 160| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL )
CREATE TABLE IF NOT EXISTS members ( id VARCHAR(255) PRIMARY KEY, name VARCHAR(255) NOT NULL );
2025-12-19T22:44:38.332+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078332 | took 0ms | statement | connection 160| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE )
CREATE TABLE IF NOT EXISTS books ( id VARCHAR(255) PRIMARY KEY, title VARCHAR(255) NOT NULL, loaned_to VARCHAR(255), due_date DATE );
2025-12-19T22:44:38.332+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078332 | took 0ms | statement | connection 160| url jdbc:h2:mem:library
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) )
CREATE TABLE IF NOT EXISTS book_reservations ( book_id VARCHAR(255) NOT NULL, position INTEGER NOT NULL, member_id VARCHAR(255), CONSTRAINT fk_book_reservation_book FOREIGN KEY (book_id) REFERENCES books (id) );
2025-12-19T22:44:38.340+02:00  INFO 1050170 --- [library-api] [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-19T22:44:38.343+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-19T22:44:38.348+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-19T22:44:38.380+02:00  INFO 1050170 --- [library-api] [    Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-19T22:44:38.381+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078381 | took 0ms | statement | connection 162| url jdbc:h2:mem:library
select * from INFORMATION_SCHEMA.SEQUENCES
select * from INFORMATION_SCHEMA.SEQUENCES;
2025-12-19T22:44:38.382+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078382 | took 0ms | statement | connection 162| url jdbc:h2:mem:library
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0
select * from "LIBRARY"."PUBLIC"."BOOKS" where 1=0;
2025-12-19T22:44:38.382+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:38.477+02:00  INFO 1050170 --- [library-api] [    Test worker] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 45381 (http) with context path '/'
2025-12-19T22:44:38.479+02:00  INFO 1050170 --- [library-api] [    Test worker] c.nortal.library.api.ApiIntegrationTest  : Started ApiIntegrationTest in 0.338 seconds (process running for 9.988)
2025-12-19T22:44:38.480+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078480 | took 0ms | statement | connection 163| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m1';
2025-12-19T22:44:38.481+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078481 | took 0ms | commit | connection 163| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.482+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078482 | took 0ms | statement | connection 164| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m2';
2025-12-19T22:44:38.482+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078482 | took 0ms | commit | connection 164| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.482+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078482 | took 0ms | statement | connection 165| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m3';
2025-12-19T22:44:38.483+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078483 | took 0ms | commit | connection 165| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.483+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078483 | took 0ms | statement | connection 166| url jdbc:h2:mem:library
select m1_0.id,m1_0.name from members m1_0 where m1_0.id=?
select m1_0.id,m1_0.name from members m1_0 where m1_0.id='m4';
2025-12-19T22:44:38.483+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078483 | took 0ms | commit | connection 166| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.484+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078484 | took 0ms | statement | connection 167| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b1';
2025-12-19T22:44:38.485+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078485 | took 0ms | statement | connection 167| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b1';
2025-12-19T22:44:38.485+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078485 | took 0ms | commit | connection 167| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.485+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078485 | took 0ms | statement | connection 168| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b2';
2025-12-19T22:44:38.486+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078486 | took 0ms | statement | connection 168| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b2';
2025-12-19T22:44:38.486+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078486 | took 0ms | commit | connection 168| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.486+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078486 | took 0ms | statement | connection 169| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b3';
2025-12-19T22:44:38.486+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078486 | took 0ms | statement | connection 169| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b3';
2025-12-19T22:44:38.486+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078486 | took 0ms | commit | connection 169| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.487+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078487 | took 0ms | statement | connection 170| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b4';
2025-12-19T22:44:38.487+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078487 | took 0ms | statement | connection 170| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b4';
2025-12-19T22:44:38.487+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078487 | took 0ms | commit | connection 170| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.488+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078488 | took 0ms | statement | connection 171| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b5';
2025-12-19T22:44:38.488+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078488 | took 0ms | statement | connection 171| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b5';
2025-12-19T22:44:38.488+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078488 | took 0ms | commit | connection 171| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.489+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078489 | took 0ms | statement | connection 172| url jdbc:h2:mem:library
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id=?
select b1_0.id,b1_0.due_date,b1_0.loaned_to,b1_0.title from books b1_0 where b1_0.id='b6';
2025-12-19T22:44:38.489+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078489 | took 0ms | statement | connection 172| url jdbc:h2:mem:library
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id=?
select rq1_0.book_id,rq1_0.position,rq1_0.member_id from book_reservations rq1_0 where rq1_0.book_id='b6';
2025-12-19T22:44:38.490+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078490 | took 0ms | statement | connection 172| url jdbc:h2:mem:library
update books set due_date=?,loaned_to=?,title=? where id=?
update books set due_date=NULL,loaned_to=NULL,title='The Pragmatic Programmer' where id='b6';
2025-12-19T22:44:38.490+02:00  INFO 1050170 --- [library-api] [    Test worker] p6spy                                    : #1766177078490 | took 0ms | commit | connection 172| url jdbc:h2:mem:library

;
2025-12-19T22:44:38.494+02:00  INFO 1050170 --- [library-api] [-auto-10-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-19T22:44:38.494+02:00  INFO 1050170 --- [library-api] [-auto-10-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-19T22:44:38.494+02:00  INFO 1050170 --- [library-api] [-auto-10-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-12-19T22:44:38.503+02:00  INFO 1050170 --- [library-api] [    Test worker] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-19T22:44:38.503+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown initiated...
2025-12-19T22:44:38.521+02:00  INFO 1050170 --- [library-api] [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown completed.
]]></system-out>
  <system-err><![CDATA[WARNING: A Java agent has been loaded dynamically (/home/kooduser/.gradle/caches/modules-2/files-2.1/net.bytebuddy/byte-buddy-agent/1.14.19/154da3a65b4f4a909d3e5bdec55d1b2b4cbb6ce1/byte-buddy-agent-1.14.19.jar)
WARNING: If a serviceability tool is in use, please run with -XX:+EnableDynamicAgentLoading to hide this warning
WARNING: If a serviceability tool is not in use, please run with -Djdk.instrument.traceUsage for more information
WARNING: Dynamic loading of agents will be disallowed by default in a future release
]]></system-err>
</testsuite>
